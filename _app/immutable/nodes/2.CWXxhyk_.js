import{a as T,f as E,c as He,t as Te}from"../chunks/CNzOhNh6.js";import{a as de,F as Ue,h as U,M as ce,a2 as Ve,G as We,i as u,I as Ke,K as Ge,L as Ie,N as fe,e as ue,az as Ye,aG as Xe,ar as Ee,c as X,aN as Q,b as ge,aO as Qe,s as Ze,V as Je,aP as Le,aF as Be,aQ as $e,aR as et,aK as tt,ab as we,aS as at,r as Ne,p as qe,aT as be,aU as lt,aD as nt,d as rt,aA as st,aV as Ce,ad as Oe,aW as it,aX as De,aI as ot,aY as Fe,aZ as vt,a_ as ut,a$ as dt,b0 as ct,b1 as ft,b2 as bt,b3 as mt,b4 as _t,b5 as gt,aL as pt,n as ht,aa as yt,y as V,B as W,D as g,C as h,A as N,E as p,z as ne,aM as D,f as H,j as q,as as kt,a0 as Bt,b6 as xt}from"../chunks/yuMo3aAj.js";import{p as Tt,i as F}from"../chunks/CfpTbhAb.js";import{d as le,s as L,a as z}from"../chunks/CFJisXBV.js";import{t as d}from"../chunks/BA_xjfrY.js";import{i as It}from"../chunks/CeEwHFNq.js";function Z(e,t){return t}function Et(e,t,a){for(var l=[],r=t.length,v,s=t.length,o=0;o<r;o++){let _=t[o];qe(_,()=>{if(v){if(v.pending.delete(_),v.done.add(_),v.pending.size===0){var m=e.outrogroups;pe(Be(v.done)),m.delete(v),m.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var n=l.length===0&&a!==null;if(n){var i=a,f=i.parentNode;nt(f),f.append(i),e.items.clear()}pe(t,!n)}else v={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(v)}function pe(e,t=!0){for(var a=0;a<e.length;a++)rt(e[a],t)}var Ae;function J(e,t,a,l,r,v=null){var s=e,o=new Map,n=(t&Ce)!==0;if(n){var i=e;s=U?ce(Ve(i)):i.appendChild(de())}U&&We();var f=null,_=Je(()=>{var b=a();return Le(b)?b:b==null?[]:Be(b)}),m,B=!0;function y(){c.fallback=f,wt(c,m,s,t,l),f!==null&&(m.length===0?(f.f&Q)===0?Ne(f):(f.f^=Q,ie(f,null,s)):qe(f,()=>{f=null}))}var k=Ue(()=>{m=u(_);var b=m.length;let x=!1;if(U){var I=Ke(s)===Ge;I!==(b===0)&&(s=Ie(),ce(s),fe(!1),x=!0)}for(var M=new Set,R=X,A=Ze(),S=0;S<b;S+=1){U&&ue.nodeType===Ye&&ue.data===Xe&&(s=ue,x=!0,fe(!1));var P=m[S],C=l(P,S),w=B?null:o.get(C);w?(w.v&&Ee(w.v,P),w.i&&Ee(w.i,S),A&&R.unskip_effect(w.e)):(w=At(o,B?s:Ae??=de(),P,C,S,r,t,a),B||(w.e.f|=Q),o.set(C,w)),M.add(C)}if(b===0&&v&&!f&&(B?f=ge(()=>v(s)):(f=ge(()=>v(Ae??=de())),f.f|=Q)),b>M.size&&Qe(),U&&b>0&&ce(Ie()),!B)if(A){for(const[j,O]of o)M.has(j)||R.skip_effect(O.e);R.oncommit(y),R.ondiscard(()=>{})}else y();x&&fe(!0),u(_)}),c={effect:k,items:o,outrogroups:null,fallback:f};B=!1,U&&(s=ue)}function se(e){for(;e!==null&&(e.f&lt)===0;)e=e.next;return e}function wt(e,t,a,l,r){var v=(l&it)!==0,s=t.length,o=e.items,n=se(e.effect.first),i,f=null,_,m=[],B=[],y,k,c,b;if(v)for(b=0;b<s;b+=1)y=t[b],k=r(y,b),c=o.get(k).e,(c.f&Q)===0&&(c.nodes?.a?.measure(),(_??=new Set).add(c));for(b=0;b<s;b+=1){if(y=t[b],k=r(y,b),c=o.get(k).e,e.outrogroups!==null)for(const w of e.outrogroups)w.pending.delete(c),w.done.delete(c);if((c.f&Q)!==0)if(c.f^=Q,c===n)ie(c,null,a);else{var x=f?f.next:n;c===e.effect.last&&(e.effect.last=c.prev),c.prev&&(c.prev.next=c.next),c.next&&(c.next.prev=c.prev),ee(e,f,c),ee(e,c,x),ie(c,x,a),f=c,m=[],B=[],n=se(f.next);continue}if((c.f&be)!==0&&(Ne(c),v&&(c.nodes?.a?.unfix(),(_??=new Set).delete(c))),c!==n){if(i!==void 0&&i.has(c)){if(m.length<B.length){var I=B[0],M;f=I.prev;var R=m[0],A=m[m.length-1];for(M=0;M<m.length;M+=1)ie(m[M],I,a);for(M=0;M<B.length;M+=1)i.delete(B[M]);ee(e,R.prev,A.next),ee(e,f,R),ee(e,A,I),n=I,f=A,b-=1,m=[],B=[]}else i.delete(c),ie(c,n,a),ee(e,c.prev,c.next),ee(e,c,f===null?e.effect.first:f.next),ee(e,f,c),f=c;continue}for(m=[],B=[];n!==null&&n!==c;)(i??=new Set).add(n),B.push(n),n=se(n.next);if(n===null)continue}(c.f&Q)===0&&m.push(c),f=c,n=se(c.next)}if(e.outrogroups!==null){for(const w of e.outrogroups)w.pending.size===0&&(pe(Be(w.done)),e.outrogroups?.delete(w));e.outrogroups.size===0&&(e.outrogroups=null)}if(n!==null||i!==void 0){var S=[];if(i!==void 0)for(c of i)(c.f&be)===0&&S.push(c);for(;n!==null;)(n.f&be)===0&&n!==e.fallback&&S.push(n),n=se(n.next);var P=S.length;if(P>0){var C=(l&Ce)!==0&&s===0?a:null;if(v){for(b=0;b<P;b+=1)S[b].nodes?.a?.measure();for(b=0;b<P;b+=1)S[b].nodes?.a?.fix()}Et(e,S,C)}}v&&Oe(()=>{if(_!==void 0)for(c of _)c.nodes?.a?.apply()})}function At(e,t,a,l,r,v,s,o){var n=(s&$e)!==0?(s&et)===0?tt(a,!1,!1):we(a):null,i=(s&at)!==0?we(r):null;return{v:n,i,e:ge(()=>(v(t,n??a,i??r,o),()=>{e.delete(l)}))}}function ie(e,t,a){if(e.nodes)for(var l=e.nodes.start,r=e.nodes.end,v=t&&(t.f&Q)===0?t.nodes.start:a;l!==null;){var s=st(l);if(v.before(l),l===r)return;l=s}}function ee(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}const Se=[...` 	
\r\fÂ \v\uFEFF`];function St(e,t,a){var l=e==null?"":""+e;if(a){for(var r of Object.keys(a))if(a[r])l=l?l+" "+r:r;else if(l.length)for(var v=r.length,s=0;(s=l.indexOf(r,s))>=0;){var o=s+v;(s===0||Se.includes(l[s-1]))&&(o===l.length||Se.includes(l[o]))?l=(s===0?"":l.substring(0,s))+l.substring(o+1):s=o}}return l===""?null:l}function ve(e,t,a,l,r,v){var s=e.__className;if(U||s!==a||s===void 0){var o=St(a,l,v);(!U||o!==e.getAttribute("class"))&&(o==null?e.removeAttribute("class"):e.className=o),e.__className=a}else if(v&&r!==v)for(var n in v){var i=!!v[n];(r==null||i!==!!r[n])&&e.classList.toggle(n,i)}return v}function je(e,t,a=!1){if(e.multiple){if(t==null)return;if(!Le(t))return vt();for(var l of e.options)l.selected=t.includes(oe(l));return}for(l of e.options){var r=oe(l);if(ut(r,t)){l.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Mt(e){var t=new MutationObserver(()=>{je(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),dt(()=>{t.disconnect()})}function Me(e,t,a=t){var l=new WeakSet,r=!0;De(e,"change",v=>{var s=v?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(s),oe);else{var n=e.querySelector(s)??e.querySelector("option:not([disabled])");o=n&&oe(n)}a(o),X!==null&&l.add(X)}),ot(()=>{var v=t();if(e===document.activeElement){var s=Fe??X;if(l.has(s))return}if(je(e,v,r),r&&v===void 0){var o=e.querySelector(":checked");o!==null&&(v=oe(o),a(v))}e.__value=v,r=!1}),Mt(e)}function oe(e){return"__value"in e?e.__value:e.value}const Rt=Symbol("is custom element"),Pt=Symbol("is html"),Lt=mt?"link":"LINK";function te(e){if(U){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var l=e.value;he(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var r=e.checked;he(e,"checked",null),e.checked=r}}};e.__on_r=a,Oe(a),ct()}}function he(e,t,a,l){var r=Nt(e);U&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName===Lt)||r[t]!==(r[t]=a)&&(t==="loading"&&(e[ft]=a),a==null?e.removeAttribute(t):typeof a!="string"&&qt(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function Nt(e){return e.__attributes??={[Rt]:e.nodeName.includes("-"),[Pt]:e.namespaceURI===bt}}var Re=new Map;function qt(e){var t=e.getAttribute("is")||e.nodeName,a=Re.get(t);if(a)return a;Re.set(t,a=[]);for(var l,r=e,v=Element.prototype;v!==r;){l=gt(r);for(var s in l)l[s].set&&a.push(s);r=_t(r)}return a}function ae(e,t,a=t){var l=new WeakSet;De(e,"input",async r=>{var v=r?e.defaultValue:e.value;if(v=me(e)?_e(v):v,a(v),X!==null&&l.add(X),await pt(),v!==(v=t())){var s=e.selectionStart,o=e.selectionEnd,n=e.value.length;if(e.value=v??"",o!==null){var i=e.value.length;s===o&&o===n&&i>n?(e.selectionStart=i,e.selectionEnd=i):(e.selectionStart=s,e.selectionEnd=Math.min(o,i))}}}),(U&&e.defaultValue!==e.value||ht(t)==null&&e.value)&&(a(me(e)?_e(e.value):e.value),X!==null&&l.add(X)),yt(()=>{var r=t();if(e===document.activeElement){var v=Fe??X;if(l.has(v))return}me(e)&&r===_e(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function me(e){var t=e.type;return t==="number"||t==="range"}function _e(e){return e===""?null:+e}var Ct=E("<button> </button>"),Ot=E('<nav class="tab-bar svelte-1wwzsr0"></nav>');function Dt(e,t){V(t,!0);let a=Tt(t,"activeTab",15,"structure");var l=Ot();J(l,21,()=>t.tabs,Z,(r,v)=>{var s=Ct();let o;var n=h(s,!0);g(s),N(()=>{o=ve(s,1,"tab svelte-1wwzsr0",null,o,{active:a()===u(v).id}),L(n,u(v).label)}),z("click",s,()=>a(u(v).id)),T(r,s)}),g(l),T(e,l),W()}le(["click"]);const ye={quick:[{type:"round",smallBlind:25,bigBlind:50,ante:0,duration:10},{type:"round",smallBlind:50,bigBlind:100,ante:0,duration:10},{type:"break",duration:5},{type:"round",smallBlind:75,bigBlind:150,ante:0,duration:10},{type:"round",smallBlind:100,bigBlind:200,ante:25,duration:10},{type:"break",duration:5},{type:"round",smallBlind:150,bigBlind:300,ante:25,duration:10},{type:"round",smallBlind:200,bigBlind:400,ante:50,duration:10}],standard:[{type:"round",smallBlind:25,bigBlind:50,ante:0,duration:20},{type:"round",smallBlind:50,bigBlind:100,ante:0,duration:20},{type:"round",smallBlind:75,bigBlind:150,ante:0,duration:20},{type:"break",duration:10},{type:"round",smallBlind:100,bigBlind:200,ante:25,duration:20},{type:"round",smallBlind:150,bigBlind:300,ante:25,duration:20},{type:"round",smallBlind:200,bigBlind:400,ante:50,duration:20},{type:"break",duration:10},{type:"round",smallBlind:300,bigBlind:600,ante:75,duration:20},{type:"round",smallBlind:400,bigBlind:800,ante:100,duration:20},{type:"round",smallBlind:500,bigBlind:1e3,ante:100,duration:20}],deepStack:[{type:"round",smallBlind:25,bigBlind:50,ante:0,duration:30},{type:"round",smallBlind:50,bigBlind:100,ante:0,duration:30},{type:"round",smallBlind:75,bigBlind:150,ante:0,duration:30},{type:"break",duration:15},{type:"round",smallBlind:100,bigBlind:200,ante:0,duration:30},{type:"round",smallBlind:150,bigBlind:300,ante:25,duration:30},{type:"round",smallBlind:200,bigBlind:400,ante:25,duration:30},{type:"break",duration:15},{type:"round",smallBlind:300,bigBlind:600,ante:50,duration:30},{type:"round",smallBlind:400,bigBlind:800,ante:75,duration:30},{type:"round",smallBlind:500,bigBlind:1e3,ante:100,duration:30},{type:"break",duration:15},{type:"round",smallBlind:600,bigBlind:1200,ante:100,duration:30},{type:"round",smallBlind:800,bigBlind:1600,ante:200,duration:30}]};function Ft(e){return ye[e]?structuredClone(ye[e]):null}var jt=E('<button class="svelte-17xzady"> </button>'),zt=E('<div class="presets svelte-17xzady"><span class="label svelte-17xzady">Load preset:</span> <!></div>');function Ht(e,t){V(t,!1);const a=Object.keys(ye);function l(s){const o=Ft(s);o&&(d.loadStructure(o),d.save())}It();var r=zt(),v=p(h(r),2);J(v,1,()=>a,Z,(s,o)=>{var n=jt(),i=h(n,!0);g(n),N(()=>L(i,u(o))),z("click",n,()=>l(u(o))),T(s,n)}),g(r),T(e,r),W()}le(["click"]);var Ut=E('<span class="level-num svelte-ap3gho"> </span> <span class="blinds svelte-ap3gho"> </span> <span class="ante svelte-ap3gho"> </span> <span class="duration svelte-ap3gho"> </span>',1),Vt=E('<span class="break-label svelte-ap3gho">Break</span> <span class="duration svelte-ap3gho"> </span>',1),Wt=E('<div class="actions svelte-ap3gho"><button title="Move up" class="svelte-ap3gho">&uarr;</button> <button title="Move down" class="svelte-ap3gho">&darr;</button> <button class="remove svelte-ap3gho" title="Remove">&times;</button></div>'),Kt=E("<div><!> <!></div>");function Gt(e,t){V(t,!0);var a=Kt();let l;var r=h(a);{var v=i=>{var f=Ut(),_=ne(f),m=h(_);g(_);var B=p(_,2),y=h(B);g(B);var k=p(B,2),c=h(k);g(k);var b=p(k,2),x=h(b);g(b),N(()=>{L(m,`Level ${t.level.level??""}`),L(y,`${t.level.smallBlind??""}/${t.level.bigBlind??""}`),L(c,`Ante: ${t.level.ante??""}`),L(x,`${t.level.duration??""} min`)}),T(i,f)},s=i=>{var f=Vt(),_=p(ne(f),2),m=h(_);g(_),N(()=>L(m,`${t.level.duration??""} min`)),T(i,f)};F(r,i=>{t.level.type==="round"?i(v):i(s,!1)})}var o=p(r,2);{var n=i=>{var f=Wt(),_=h(f),m=p(_,2),B=p(m,2);g(f),N(()=>{_.disabled=t.isFirst,m.disabled=t.isLast}),z("click",_,()=>t.onMoveUp(t.index)),z("click",m,()=>t.onMoveDown(t.index)),z("click",B,()=>t.onRemove(t.index)),T(i,f)};F(o,i=>{t.disabled||i(n)})}g(a),N(()=>l=ve(a,1,"level-row svelte-ap3gho",null,l,{"is-break":t.level.type==="break"})),T(e,a),W()}le(["click"]);var Yt=E('<div class="add-controls svelte-q0tpu6"><fieldset class="svelte-q0tpu6"><legend class="svelte-q0tpu6">Add Round</legend> <label class="svelte-q0tpu6">Small <input type="number" min="1" class="svelte-q0tpu6"/></label> <label class="svelte-q0tpu6">Big <input type="number" min="1" class="svelte-q0tpu6"/></label> <label class="svelte-q0tpu6">Ante <input type="number" min="0" class="svelte-q0tpu6"/></label> <label class="svelte-q0tpu6">Min <input type="number" min="1" class="svelte-q0tpu6"/></label> <button class="svelte-q0tpu6">Add Round</button></fieldset> <fieldset class="svelte-q0tpu6"><legend class="svelte-q0tpu6">Add Break</legend> <label class="svelte-q0tpu6">Min <input type="number" min="1" class="svelte-q0tpu6"/></label> <button class="svelte-q0tpu6">Add Break</button></fieldset></div>'),Xt=E('<!> <div class="level-list svelte-q0tpu6"></div> <!>',1);function Qt(e,t){V(t,!0);let a=H(25),l=H(50),r=H(0),v=H(20),s=H(10);const o=D(()=>d.status!=="setup");function n(){d.addRound({smallBlind:u(a),bigBlind:u(l),ante:u(r),duration:u(v)}),d.save()}function i(){d.addBreak(u(s)),d.save()}function f(I){d.removeLevel(I),d.save()}function _(I){d.moveLevelUp(I),d.save()}function m(I){d.moveLevelDown(I),d.save()}var B=Xt(),y=ne(B);{var k=I=>{Ht(I,{})};F(y,I=>{u(o)||I(k)})}var c=p(y,2);J(c,21,()=>d.structure,Z,(I,M,R)=>{{let A=D(()=>R===d.structure.length-1);Gt(I,{get level(){return u(M)},index:R,onRemove:f,onMoveUp:_,onMoveDown:m,isFirst:R===0,get isLast(){return u(A)},get disabled(){return u(o)}})}}),g(c);var b=p(c,2);{var x=I=>{var M=Yt(),R=h(M),A=p(h(R),2),S=p(h(A));te(S),g(A);var P=p(A,2),C=p(h(P));te(C),g(P);var w=p(P,2),j=p(h(w));te(j),g(w);var O=p(w,2),K=p(h(O));te(K),g(O);var G=p(O,2);g(R);var $=p(R,2),re=p(h($),2),xe=p(h(re));te(xe),g(re);var ze=p(re,2);g($),g(M),ae(S,()=>u(a),Y=>q(a,Y)),ae(C,()=>u(l),Y=>q(l,Y)),ae(j,()=>u(r),Y=>q(r,Y)),ae(K,()=>u(v),Y=>q(v,Y)),z("click",G,n),ae(xe,()=>u(s),Y=>q(s,Y)),z("click",ze,i),T(I,M)};F(b,I=>{u(o)||I(x)})}T(e,B),W()}le(["click"]);var Zt=E('<span class="status svelte-1n9lh6">Eliminated</span>'),Jt=E('<button class="remove svelte-1n9lh6">&times;</button>'),$t=E('<li><span class="name svelte-1n9lh6"> </span> <!> <!></li>'),ea=E('<div class="players-tab"><div class="add-player svelte-1n9lh6"><input type="text" placeholder="Player name" class="svelte-1n9lh6"/> <button class="svelte-1n9lh6">Add Player</button></div> <p class="count svelte-1n9lh6"> </p> <ul class="player-list svelte-1n9lh6"></ul></div>');function ta(e,t){V(t,!0);let a=H("");function l(){const y=u(a).trim();y&&(d.addPlayer(y),d.save(),q(a,""))}function r(y){d.removePlayer(y),d.save()}function v(y){y.key==="Enter"&&l()}const s=D(()=>d.status==="setup");var o=ea(),n=h(o),i=h(n);te(i);var f=p(i,2);g(n);var _=p(n,2),m=h(_);g(_);var B=p(_,2);J(B,21,()=>d.players,Z,(y,k)=>{var c=$t();let b;var x=h(c),I=h(x,!0);g(x);var M=p(x,2);{var R=P=>{var C=Zt();T(P,C)};F(M,P=>{u(k).status==="eliminated"&&P(R)})}var A=p(M,2);{var S=P=>{var C=Jt();z("click",C,()=>r(u(k).id)),T(P,C)};F(A,P=>{u(s)&&P(S)})}g(c),N(()=>{b=ve(c,1,"svelte-1n9lh6",null,b,{eliminated:u(k).status==="eliminated"}),L(I,u(k).name)}),T(y,c)}),g(B),g(o),N(()=>L(m,`${d.players.length??""} players registered
    (${d.activePlayers.length??""} active)`)),z("keydown",i,v),ae(i,()=>u(a),y=>q(a,y)),z("click",f,l),T(e,o),W()}le(["keydown","click"]);function ke(e){const t=[...e];for(let a=t.length-1;a>0;a--){const l=Math.floor(Math.random()*(a+1));[t[a],t[l]]=[t[l],t[a]]}return t}function aa(e,t){const a=e.filter(s=>s.status==="active"),l=ke(a),r=Math.ceil(l.length/t),v=Array.from({length:r},(s,o)=>({id:`t${o+1}`,name:`Table ${o+1}`,seats:t}));for(const s of e)s.tableId=null,s.seat=null;l.forEach((s,o)=>{const n=o%r;s.tableId=v[n].id});for(const s of v){const o=l.filter(i=>i.tableId===s.id),n=ke(Array.from({length:t},(i,f)=>f+1));o.forEach((i,f)=>{i.seat=n[f]})}return{tables:v,players:e}}function la(e,t){const a=e.filter(o=>o.status==="active"),l=t.filter(o=>a.some(n=>n.tableId===o.id)),r=[];for(const o of l){const n=a.filter(i=>i.tableId===o.id);if(n.length<=1&&l.length>1)for(const i of n){const _=l.filter(y=>y.id!==o.id).reduce((y,k)=>{const c=a.filter(x=>x.tableId===y.id).length,b=a.filter(x=>x.tableId===k.id).length;return c<=b?y:k}),m=a.filter(y=>y.tableId===_.id).map(y=>y.seat),B=Array.from({length:_.seats},(y,k)=>k+1).find(y=>!m.includes(y));r.push({playerId:i.id,from:o.name,to:_.name}),i.tableId=_.id,i.seat=B}}const v=t.filter(o=>a.some(n=>n.tableId===o.id));let s=!1;for(;!s;){const o=v.map(f=>({table:f,count:a.filter(_=>_.tableId===f.id).length})),n=o.reduce((f,_)=>f.count>=_.count?f:_),i=o.reduce((f,_)=>f.count<=_.count?f:_);if(n.count-i.count>1){const f=a.filter(y=>y.tableId===n.table.id),_=f[Math.floor(Math.random()*f.length)],m=a.filter(y=>y.tableId===i.table.id).map(y=>y.seat),B=Array.from({length:i.table.seats},(y,k)=>k+1).find(y=>!m.includes(y));r.push({playerId:_.id,from:n.table.name,to:i.table.name}),_.tableId=i.table.id,_.seat=B}else s=!0}return{moves:r,tables:v}}function na(e,t,a){const l=e.filter(n=>n.status==="active");if(l.length>a)return null;const r=t.filter(n=>l.some(i=>i.tableId===n.id));if(r.length<=1)return null;const v=r[0];v.name="Final Table";const s=[];for(const n of l)n.tableId!==v.id&&(s.push({playerId:n.id,from:t.find(i=>i.id===n.tableId)?.name,to:"Final Table"}),n.tableId=v.id);const o=ke(Array.from({length:v.seats},(n,i)=>i+1));return l.forEach((n,i)=>{n.seat=o[i]}),{finalTable:v,moves:s}}var ra=E('<li class="svelte-1hud1it"> </li>'),sa=E('<div class="table-view svelte-1hud1it"><h3 class="svelte-1hud1it"> </h3> <p class="count svelte-1hud1it"> </p> <ul class="svelte-1hud1it"></ul></div>');function ia(e,t){V(t,!0);const a=D(()=>t.players.filter(i=>i.tableId===t.table.id&&i.status==="active").sort((i,f)=>i.seat-f.seat));var l=sa(),r=h(l),v=h(r,!0);g(r);var s=p(r,2),o=h(s);g(s);var n=p(s,2);J(n,21,()=>u(a),Z,(i,f)=>{var _=ra(),m=h(_);g(_),N(()=>L(m,`Seat ${u(f).seat??""}: ${u(f).name??""}`)),T(i,_)}),g(n),g(l),N(()=>{L(v,t.table.name),L(o,`${u(a).length??""} / ${t.table.seats??""} seats`)}),T(e,l),W()}var oa=E('<p class="notification svelte-10fr8jr"> </p>'),va=E('<div class="tables-grid svelte-10fr8jr"></div>'),ua=E('<p class="empty svelte-10fr8jr">No tables assigned yet. Register players and click "Assign Tables".</p>'),da=E('<div class="table-setup"><div class="settings svelte-10fr8jr"><label class="svelte-10fr8jr">Max players per table: <input type="number" min="2" max="10" class="svelte-10fr8jr"/></label> <label class="svelte-10fr8jr">Final table at: <input type="number" min="2" max="20" class="svelte-10fr8jr"/> <span class="hint svelte-10fr8jr">players</span></label></div> <button class="assign-btn svelte-10fr8jr">Assign Tables</button> <!> <!></div>');function ca(e,t){V(t,!0);let a=H("");const l=D(()=>d.activePlayers.length>=2&&d.status!=="running");function r(){const b=aa(d.players,d.tableSize);d.tables=b.tables,d.save(),q(a,`Assigned ${d.activePlayers.length} players to ${b.tables.length} table(s).`),setTimeout(()=>q(a,""),3e3)}var v=da(),s=h(v),o=h(s),n=p(h(o));te(n),g(o);var i=p(o,2),f=p(h(i));te(f),kt(2),g(i),g(s);var _=p(s,2),m=p(_,2);{var B=b=>{var x=oa(),I=h(x,!0);g(x),N(()=>L(I,u(a))),T(b,x)};F(m,b=>{u(a)&&b(B)})}var y=p(m,2);{var k=b=>{var x=va();J(x,21,()=>d.tables,Z,(I,M)=>{ia(I,{get table(){return u(M)},get players(){return d.players}})}),g(x),T(b,x)},c=b=>{var x=ua();T(b,x)};F(y,b=>{d.tables.length>0?b(k):b(c,!1)})}g(v),N(()=>_.disabled=!u(l)),ae(n,()=>d.tableSize,b=>d.tableSize=b),ae(f,()=>d.finalTableThreshold,b=>d.finalTableThreshold=b),z("click",_,r),T(e,v),W()}le(["click"]);function fa(e=null){let t=!1,a=e;function l(){return a||(a=new(window.AudioContext||window.webkitAudioContext)),a}function r(v,s,o="sine"){if(t)return;const n=l(),i=n.createOscillator(),f=n.createGain();i.type=o,i.frequency.setValueAtTime(v,n.currentTime),f.gain.setValueAtTime(.3,n.currentTime),i.connect(f),f.connect(n.destination),i.start(),i.stop(n.currentTime+s)}return{get isMuted(){return t},mute(){t=!0},unmute(){t=!1},toggleMute(){t=!t},playRoundEnd(){r(880,.5)},playBreakEnd(){r(660,.5)},playWarning(){r(440,.3)}}}var ba=E('<span class="ante svelte-xbucwj"> </span>'),ma=E('<span class="blinds svelte-xbucwj"> </span> <!>',1),_a=E('<span class="break-text svelte-xbucwj">Break</span>'),ga=E('<div class="level-info svelte-xbucwj"><span class="label svelte-xbucwj"> </span> <!></div>');function Pe(e,t){V(t,!0);var a=He(),l=ne(a);{var r=v=>{var s=ga(),o=h(s),n=h(o,!0);g(o);var i=p(o,2);{var f=m=>{var B=ma(),y=ne(B),k=h(y);g(y);var c=p(y,2);{var b=x=>{var I=ba(),M=h(I);g(I),N(()=>L(M,`Ante: ${t.level.ante??""}`)),T(x,I)};F(c,x=>{t.level.ante>0&&x(b)})}N(()=>L(k,`Blinds: ${t.level.smallBlind??""}/${t.level.bigBlind??""}`)),T(m,B)},_=m=>{var B=_a();T(m,B)};F(i,m=>{t.level.type==="round"?m(f):m(_,!1)})}g(s),N(()=>L(n,t.label)),T(v,s)};F(l,v=>{t.level&&v(r)})}T(e,a),W()}var pa=E('<div class="controls svelte-1bc6657"><button title="Previous level" class="svelte-1bc6657">&laquo; Prev</button> <button class="play-pause svelte-1bc6657"> </button> <button title="Next level" class="svelte-1bc6657">Next &raquo;</button> <button class="mute svelte-1bc6657"> </button></div>');function ha(e,t){var a=pa(),l=h(a),r=p(l,2),v=h(r,!0);g(r);var s=p(r,2),o=p(s,2),n=h(o,!0);g(o),g(a),N(()=>{l.disabled=!t.canPrev,L(v,t.isRunning?"Pause":"Play"),s.disabled=!t.canNext,he(o,"title",t.isMuted?"Unmute":"Mute"),L(n,t.isMuted?"Unmute":"Mute")}),z("click",l,function(...i){t.onPrev?.apply(this,i)}),z("click",r,function(...i){t.onToggle?.apply(this,i)}),z("click",s,function(...i){t.onNext?.apply(this,i)}),z("click",o,function(...i){t.onToggleMute?.apply(this,i)}),T(e,a)}le(["click"]);var ya=E('<p class="empty svelte-1hmdg4r">Set up the tournament structure first.</p>'),ka=E('<div class="break-banner svelte-1hmdg4r">BREAK</div>'),Ba=E('<!> <!> <div class="timer svelte-1hmdg4r"> </div> <!> <!>',1),xa=E("<div><!></div>");function Ta(e,t){V(t,!0);let a=H(null),l=null;Bt(()=>{q(a,fa(),!0)}),xt(()=>{l&&clearInterval(l)});const r=D(()=>d.structure[d.clock.currentLevelIndex]),v=D(()=>d.structure[d.clock.currentLevelIndex+1]),s=D(()=>d.clock.currentLevelIndex>0),o=D(()=>d.clock.currentLevelIndex<d.structure.length-1),n=D(()=>u(r)?.type==="break"),i=D(()=>Math.floor(d.clock.timeRemaining/60)),f=D(()=>d.clock.timeRemaining%60),_=D(()=>`${String(u(i)).padStart(2,"0")}:${String(u(f)).padStart(2,"0")}`);function m(){d.structure.length!==0&&(d.clock.isRunning?(d.clock.isRunning=!1,clearInterval(l),l=null):(d.status==="setup"&&(d.status="running",d.clock.timeRemaining=u(r).duration*60),d.clock.isRunning=!0,l=setInterval(B,1e3)),d.save())}function B(){if(d.clock.timeRemaining<=0){y();return}d.clock.timeRemaining--,d.clock.timeRemaining===60&&u(a)&&u(a).playWarning()}function y(){if(d.clock.currentLevelIndex>=d.structure.length-1){d.clock.isRunning=!1,clearInterval(l),l=null,d.status="finished",d.save();return}const A=u(r)?.type==="break";d.clock.currentLevelIndex++;const S=d.structure[d.clock.currentLevelIndex];d.clock.timeRemaining=S.duration*60,u(a)&&(A?u(a).playBreakEnd():u(a).playRoundEnd()),d.save()}function k(){u(s)&&(d.clock.currentLevelIndex--,d.clock.timeRemaining=u(r).duration*60,d.save())}function c(){u(o)&&y()}var b=xa();let x;var I=h(b);{var M=A=>{var S=ya();T(A,S)},R=A=>{var S=Ba(),P=ne(S);{var C=$=>{var re=ka();T($,re)};F(P,$=>{u(n)&&$(C)})}var w=p(P,2);Pe(w,{get level(){return u(r)},label:"Current"});var j=p(w,2),O=h(j,!0);g(j);var K=p(j,2);Pe(K,{get level(){return u(v)},label:"Next"});var G=p(K,2);{let $=D(()=>u(a)?.isMuted??!1);ha(G,{get isRunning(){return d.clock.isRunning},onToggle:m,onPrev:k,onNext:c,get canPrev(){return u(s)},get canNext(){return u(o)},get isMuted(){return u($)},onToggleMute:()=>u(a)?.toggleMute()})}N(()=>L(O,u(_))),T(A,S)};F(I,A=>{d.structure.length===0?A(M):A(R,!1)})}g(b),N(()=>x=ve(b,1,"clock-tab svelte-1hmdg4r",null,x,{"is-break":u(n)})),T(e,b),W()}var Ia=E('<tr><td class="svelte-e9v8ke"> </td><td class="svelte-e9v8ke"> </td><td class="svelte-e9v8ke"> </td><td class="svelte-e9v8ke"><!></td></tr>'),Ea=E('<div class="log"><h3 class="svelte-e9v8ke">Standings</h3> <table class="svelte-e9v8ke"><thead><tr><th class="svelte-e9v8ke">#</th><th class="svelte-e9v8ke">Player</th><th class="svelte-e9v8ke">Status</th><th class="svelte-e9v8ke">Eliminated By</th></tr></thead><tbody></tbody></table></div>');function wa(e,t){V(t,!0);const a=D(()=>d.standings);function l(o){return d.players.find(n=>n.id===o)?.name??"?"}var r=Ea(),v=p(h(r),2),s=p(h(v));J(s,21,()=>u(a),Z,(o,n)=>{var i=Ia();let f;var _=h(i),m=h(_,!0);g(_);var B=p(_),y=h(B,!0);g(B);var k=p(B),c=h(k,!0);g(k);var b=p(k),x=h(b);{var I=R=>{const A=D(()=>d.eliminations.find(P=>P.playerId===u(n).id));var S=Te();N(P=>L(S,P),[()=>u(A)?.eliminatedBy?l(u(A).eliminatedBy):"-"]),T(R,S)},M=R=>{var A=Te("-");T(R,A)};F(x,R=>{u(n).status==="eliminated"?R(I):R(M,!1)})}g(b),g(i),N(()=>{f=ve(i,1,"svelte-e9v8ke",null,f,{eliminated:u(n).status==="eliminated"}),L(m,u(n).position),L(y,u(n).name),L(c,u(n).status==="active"?"Playing":"Out")}),T(o,i)}),g(s),g(v),g(r),T(e,r),W()}var Aa=E("<option> </option>"),Sa=E("<option> </option>"),Ma=E('<div class="form svelte-2nklbm"><label class="svelte-2nklbm">Eliminated: <select class="svelte-2nklbm"><option>Select player...</option><!></select></label> <label class="svelte-2nklbm">By: <select class="svelte-2nklbm"><option>Optional...</option><!></select></label> <button class="svelte-2nklbm">Eliminate</button></div>'),Ra=E('<p class="winner svelte-2nklbm"> </p>'),Pa=E('<p class="empty svelte-2nklbm">No active players.</p>'),La=E('<p class="notification svelte-2nklbm"> </p>'),Na=E('<div class="elimination-panel"><!> <!> <!></div>');function qa(e,t){V(t,!0);let a=H(""),l=H(""),r=H("");const v=D(()=>d.activePlayers);function s(){if(!u(a))return;d.eliminatePlayer(u(a),u(l)||null);const k=na(d.players,d.tables,d.finalTableThreshold);if(k)q(r,`Final Table! ${k.moves.length} player(s) moved.`);else{const{moves:c}=la(d.players,d.tables);c.length>0?q(r,c.map(b=>`${d.players.find(x=>x.id===b.playerId)?.name} moved from ${b.from} to ${b.to}`).join(". "),!0):q(r,"")}d.save(),q(a,""),q(l,""),d.activePlayers.length===1&&(q(r,`Tournament over! Winner: ${d.activePlayers[0].name}`),d.status="finished",d.save()),u(r)&&setTimeout(()=>q(r,""),5e3)}var o=Na(),n=h(o);{var i=k=>{var c=Ma(),b=h(c),x=p(h(b)),I=h(x);I.value=I.__value="";var M=p(I);J(M,17,()=>u(v),Z,(w,j)=>{var O=Aa(),K=h(O,!0);g(O);var G={};N(()=>{L(K,u(j).name),G!==(G=u(j).id)&&(O.value=(O.__value=u(j).id)??"")}),T(w,O)}),g(x),g(b);var R=p(b,2),A=p(h(R)),S=h(A);S.value=S.__value="";var P=p(S);J(P,17,()=>u(v).filter(w=>w.id!==u(a)),Z,(w,j)=>{var O=Sa(),K=h(O,!0);g(O);var G={};N(()=>{L(K,u(j).name),G!==(G=u(j).id)&&(O.value=(O.__value=u(j).id)??"")}),T(w,O)}),g(A),g(R);var C=p(R,2);g(c),N(()=>C.disabled=!u(a)),Me(x,()=>u(a),w=>q(a,w)),Me(A,()=>u(l),w=>q(l,w)),z("click",C,s),T(k,c)},f=k=>{var c=Ra(),b=h(c);g(c),N(()=>L(b,`Winner: ${u(v)[0].name??""}`)),T(k,c)},_=k=>{var c=Pa();T(k,c)};F(n,k=>{u(v).length>1?k(i):u(v).length===1?k(f,1):k(_,!1)})}var m=p(n,2);{var B=k=>{var c=La(),b=h(c,!0);g(c),N(()=>L(b,u(r))),T(k,c)};F(m,k=>{u(r)&&k(B)})}var y=p(m,2);wa(y,{}),g(o),T(e,o),W()}le(["click"]);var Ca=E('<!> <div class="tab-content svelte-1uha8ag"><!></div>',1);function Ua(e){const t=[{id:"structure",label:"Structure"},{id:"players",label:"Players"},{id:"tables",label:"Tables"},{id:"clock",label:"Clock"},{id:"eliminations",label:"Eliminations"}];let a=H("structure");var l=Ca(),r=ne(l);Dt(r,{get tabs(){return t},get activeTab(){return u(a)},set activeTab(m){q(a,m,!0)}});var v=p(r,2),s=h(v);{var o=m=>{Qt(m,{})},n=m=>{ta(m,{})},i=m=>{ca(m,{})},f=m=>{Ta(m,{})},_=m=>{qa(m,{})};F(s,m=>{u(a)==="structure"?m(o):u(a)==="players"?m(n,1):u(a)==="tables"?m(i,2):u(a)==="clock"?m(f,3):u(a)==="eliminations"&&m(_,4)})}g(v),T(e,l)}export{Ua as component};
