import{d as ne,a as T,f as I,b as U,g as Ue,t as Ie}from"../chunks/BRZgYzc2.js";import{v as fe,B as Ve,x as K,J as be,aq as We,C as Ke,a as c,F as Ye,G as Ge,I as we,K as me,y as ce,ar as Xe,ay as Ze,aj as Ee,n as Z,aN as J,w as he,aO as Je,A as Qe,e as $e,aP as Ne,ax as Te,aQ as et,aR as tt,aK as at,a3 as Ae,aS as nt,r as qe,q as Ce,aT as ge,aU as lt,av as rt,o as it,as as st,aV as De,a5 as Oe,aW as ot,aX as Fe,aI as vt,aY as je,aZ as ut,a_ as ct,a$ as dt,b0 as ft,b1 as bt,b2 as mt,b3 as gt,b4 as pt,b5 as _t,aL as ht,u as kt,a2 as yt,V as Y,Y as G,_ as p,Z as h,X as q,$ as _,W as le,aM as j,m as W,s as D,ak as Bt,a0 as xt,b6 as Tt}from"../chunks/DQCkQl5y.js";import{i as z}from"../chunks/EheYHruU.js";import{s as P}from"../chunks/DwcujrbB.js";import{p as It}from"../chunks/BL4-eBX3.js";import{t as n}from"../chunks/DhXHrmgc.js";import{i as wt}from"../chunks/BXVAkpYj.js";function Q(e,t){return t}function Et(e,t,a){for(var l=[],i=t.length,v,s=t.length,u=0;u<i;u++){let g=t[u];Ce(g,()=>{if(v){if(v.pending.delete(g),v.done.add(g),v.pending.size===0){var m=e.outrogroups;ke(Te(v.done)),m.delete(v),m.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var r=l.length===0&&a!==null;if(r){var o=a,f=o.parentNode;rt(f),f.append(o),e.items.clear()}ke(t,!r)}else v={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(v)}function ke(e,t=!0){for(var a=0;a<e.length;a++)it(e[a],t)}var Se;function $(e,t,a,l,i,v=null){var s=e,u=new Map,r=(t&De)!==0;if(r){var o=e;s=K?be(We(o)):o.appendChild(fe())}K&&Ke();var f=null,g=$e(()=>{var b=a();return Ne(b)?b:b==null?[]:Te(b)}),m,B=!0;function k(){d.fallback=f,At(d,m,s,t,l),f!==null&&(m.length===0?(f.f&J)===0?qe(f):(f.f^=J,oe(f,null,s)):Ce(f,()=>{f=null}))}var w=Ve(()=>{m=c(g);var b=m.length;let y=!1;if(K){var x=Ye(s)===Ge;x!==(b===0)&&(s=we(),be(s),me(!1),y=!0)}for(var A=new Set,S=Z,N=Qe(),M=0;M<b;M+=1){K&&ce.nodeType===Xe&&ce.data===Ze&&(s=ce,y=!0,me(!1));var R=m[M],O=l(R,M),E=B?null:u.get(O);E?(E.v&&Ee(E.v,R),E.i&&Ee(E.i,M),N&&S.unskip_effect(E.e)):(E=St(u,B?s:Se??=fe(),R,O,M,i,t,a),B||(E.e.f|=J),u.set(O,E)),A.add(O)}if(b===0&&v&&!f&&(B?f=he(()=>v(s)):(f=he(()=>v(Se??=fe())),f.f|=J)),b>A.size&&Je(),K&&b>0&&be(we()),!B)if(N){for(const[L,C]of u)A.has(L)||S.skip_effect(C.e);S.oncommit(k),S.ondiscard(()=>{})}else k();y&&me(!0),c(g)}),d={effect:w,items:u,outrogroups:null,fallback:f};B=!1,K&&(s=ce)}function se(e){for(;e!==null&&(e.f&lt)===0;)e=e.next;return e}function At(e,t,a,l,i){var v=(l&ot)!==0,s=t.length,u=e.items,r=se(e.effect.first),o,f=null,g,m=[],B=[],k,w,d,b;if(v)for(b=0;b<s;b+=1)k=t[b],w=i(k,b),d=u.get(w).e,(d.f&J)===0&&(d.nodes?.a?.measure(),(g??=new Set).add(d));for(b=0;b<s;b+=1){if(k=t[b],w=i(k,b),d=u.get(w).e,e.outrogroups!==null)for(const E of e.outrogroups)E.pending.delete(d),E.done.delete(d);if((d.f&J)!==0)if(d.f^=J,d===r)oe(d,null,a);else{var y=f?f.next:r;d===e.effect.last&&(e.effect.last=d.prev),d.prev&&(d.prev.next=d.next),d.next&&(d.next.prev=d.prev),ee(e,f,d),ee(e,d,y),oe(d,y,a),f=d,m=[],B=[],r=se(f.next);continue}if((d.f&ge)!==0&&(qe(d),v&&(d.nodes?.a?.unfix(),(g??=new Set).delete(d))),d!==r){if(o!==void 0&&o.has(d)){if(m.length<B.length){var x=B[0],A;f=x.prev;var S=m[0],N=m[m.length-1];for(A=0;A<m.length;A+=1)oe(m[A],x,a);for(A=0;A<B.length;A+=1)o.delete(B[A]);ee(e,S.prev,N.next),ee(e,f,S),ee(e,N,x),r=x,f=N,b-=1,m=[],B=[]}else o.delete(d),oe(d,r,a),ee(e,d.prev,d.next),ee(e,d,f===null?e.effect.first:f.next),ee(e,f,d),f=d;continue}for(m=[],B=[];r!==null&&r!==d;)(o??=new Set).add(r),B.push(r),r=se(r.next);if(r===null)continue}(d.f&J)===0&&m.push(d),f=d,r=se(d.next)}if(e.outrogroups!==null){for(const E of e.outrogroups)E.pending.size===0&&(ke(Te(E.done)),e.outrogroups?.delete(E));e.outrogroups.size===0&&(e.outrogroups=null)}if(r!==null||o!==void 0){var M=[];if(o!==void 0)for(d of o)(d.f&ge)===0&&M.push(d);for(;r!==null;)(r.f&ge)===0&&r!==e.fallback&&M.push(r),r=se(r.next);var R=M.length;if(R>0){var O=(l&De)!==0&&s===0?a:null;if(v){for(b=0;b<R;b+=1)M[b].nodes?.a?.measure();for(b=0;b<R;b+=1)M[b].nodes?.a?.fix()}Et(e,M,O)}}v&&Oe(()=>{if(g!==void 0)for(d of g)d.nodes?.a?.apply()})}function St(e,t,a,l,i,v,s,u){var r=(s&et)!==0?(s&tt)===0?at(a,!1,!1):Ae(a):null,o=(s&nt)!==0?Ae(i):null;return{v:r,i:o,e:he(()=>(v(t,r??a,o??i,u),()=>{e.delete(l)}))}}function oe(e,t,a){if(e.nodes)for(var l=e.nodes.start,i=e.nodes.end,v=t&&(t.f&J)===0?t.nodes.start:a;l!==null;){var s=st(l);if(v.before(l),l===i)return;l=s}}function ee(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}const Re=[...` 	
\r\fÂ \v\uFEFF`];function Rt(e,t,a){var l=e==null?"":""+e;if(a){for(var i of Object.keys(a))if(a[i])l=l?l+" "+i:i;else if(l.length)for(var v=i.length,s=0;(s=l.indexOf(i,s))>=0;){var u=s+v;(s===0||Re.includes(l[s-1]))&&(u===l.length||Re.includes(l[u]))?l=(s===0?"":l.substring(0,s))+l.substring(u+1):s=u}}return l===""?null:l}function ue(e,t,a,l,i,v){var s=e.__className;if(K||s!==a||s===void 0){var u=Rt(a,l,v);(!K||u!==e.getAttribute("class"))&&(u==null?e.removeAttribute("class"):e.className=u),e.__className=a}else if(v&&i!==v)for(var r in v){var o=!!v[r];(i==null||o!==!!i[r])&&e.classList.toggle(r,o)}return v}function ze(e,t,a=!1){if(e.multiple){if(t==null)return;if(!Ne(t))return ut();for(var l of e.options)l.selected=t.includes(ve(l));return}for(l of e.options){var i=ve(l);if(ct(i,t)){l.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Mt(e){var t=new MutationObserver(()=>{ze(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),dt(()=>{t.disconnect()})}function Me(e,t,a=t){var l=new WeakSet,i=!0;Fe(e,"change",v=>{var s=v?"[selected]":":checked",u;if(e.multiple)u=[].map.call(e.querySelectorAll(s),ve);else{var r=e.querySelector(s)??e.querySelector("option:not([disabled])");u=r&&ve(r)}a(u),Z!==null&&l.add(Z)}),vt(()=>{var v=t();if(e===document.activeElement){var s=je??Z;if(l.has(s))return}if(ze(e,v,i),i&&v===void 0){var u=e.querySelector(":checked");u!==null&&(v=ve(u),a(v))}e.__value=v,i=!1}),Mt(e)}function ve(e){return"__value"in e?e.__value:e.value}const Lt=Symbol("is custom element"),Pt=Symbol("is html"),Nt=gt?"link":"LINK";function te(e){if(K){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var l=e.value;ye(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var i=e.checked;ye(e,"checked",null),e.checked=i}}};e.__on_r=a,Oe(a),ft()}}function ye(e,t,a,l){var i=qt(e);K&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName===Nt)||i[t]!==(i[t]=a)&&(t==="loading"&&(e[bt]=a),a==null?e.removeAttribute(t):typeof a!="string"&&Ct(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function qt(e){return e.__attributes??={[Lt]:e.nodeName.includes("-"),[Pt]:e.namespaceURI===mt}}var Le=new Map;function Ct(e){var t=e.getAttribute("is")||e.nodeName,a=Le.get(t);if(a)return a;Le.set(t,a=[]);for(var l,i=e,v=Element.prototype;v!==i;){l=_t(i);for(var s in l)l[s].set&&a.push(s);i=pt(i)}return a}function ae(e,t,a=t){var l=new WeakSet;Fe(e,"input",async i=>{var v=i?e.defaultValue:e.value;if(v=pe(e)?_e(v):v,a(v),Z!==null&&l.add(Z),await ht(),v!==(v=t())){var s=e.selectionStart,u=e.selectionEnd,r=e.value.length;if(e.value=v??"",u!==null){var o=e.value.length;s===u&&u===r&&o>r?(e.selectionStart=o,e.selectionEnd=o):(e.selectionStart=s,e.selectionEnd=Math.min(u,o))}}}),(K&&e.defaultValue!==e.value||kt(t)==null&&e.value)&&(a(pe(e)?_e(e.value):e.value),Z!==null&&l.add(Z)),yt(()=>{var i=t();if(e===document.activeElement){var v=je??Z;if(l.has(v))return}pe(e)&&i===_e(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function pe(e){var t=e.type;return t==="number"||t==="range"}function _e(e){return e===""?null:+e}var Dt=I("<button> </button>"),Ot=I('<nav class="tab-bar svelte-1wwzsr0"></nav>');function Ft(e,t){Y(t,!0);let a=It(t,"activeTab",15,"structure");var l=Ot();$(l,21,()=>t.tabs,Q,(i,v)=>{var s=Dt();let u;var r=h(s,!0);p(s),q(()=>{u=ue(s,1,"tab svelte-1wwzsr0",null,u,{active:a()===c(v).id}),P(r,c(v).label)}),U("click",s,()=>a(c(v).id)),T(i,s)}),p(l),T(e,l),G()}ne(["click"]);const Be={quick:[{type:"round",smallBlind:25,bigBlind:50,ante:0,duration:10},{type:"round",smallBlind:50,bigBlind:100,ante:0,duration:10},{type:"break",duration:5},{type:"round",smallBlind:75,bigBlind:150,ante:0,duration:10},{type:"round",smallBlind:100,bigBlind:200,ante:25,duration:10},{type:"break",duration:5},{type:"round",smallBlind:150,bigBlind:300,ante:25,duration:10},{type:"round",smallBlind:200,bigBlind:400,ante:50,duration:10}],standard:[{type:"round",smallBlind:25,bigBlind:50,ante:0,duration:20},{type:"round",smallBlind:50,bigBlind:100,ante:0,duration:20},{type:"round",smallBlind:75,bigBlind:150,ante:0,duration:20},{type:"break",duration:10},{type:"round",smallBlind:100,bigBlind:200,ante:25,duration:20},{type:"round",smallBlind:150,bigBlind:300,ante:25,duration:20},{type:"round",smallBlind:200,bigBlind:400,ante:50,duration:20},{type:"break",duration:10},{type:"round",smallBlind:300,bigBlind:600,ante:75,duration:20},{type:"round",smallBlind:400,bigBlind:800,ante:100,duration:20},{type:"round",smallBlind:500,bigBlind:1e3,ante:100,duration:20}],deepStack:[{type:"round",smallBlind:25,bigBlind:50,ante:0,duration:30},{type:"round",smallBlind:50,bigBlind:100,ante:0,duration:30},{type:"round",smallBlind:75,bigBlind:150,ante:0,duration:30},{type:"break",duration:15},{type:"round",smallBlind:100,bigBlind:200,ante:0,duration:30},{type:"round",smallBlind:150,bigBlind:300,ante:25,duration:30},{type:"round",smallBlind:200,bigBlind:400,ante:25,duration:30},{type:"break",duration:15},{type:"round",smallBlind:300,bigBlind:600,ante:50,duration:30},{type:"round",smallBlind:400,bigBlind:800,ante:75,duration:30},{type:"round",smallBlind:500,bigBlind:1e3,ante:100,duration:30},{type:"break",duration:15},{type:"round",smallBlind:600,bigBlind:1200,ante:100,duration:30},{type:"round",smallBlind:800,bigBlind:1600,ante:200,duration:30}]};function jt(e){return Be[e]?structuredClone(Be[e]):null}var zt=I('<button class="svelte-17xzady"> </button>'),Ht=I('<div class="presets svelte-17xzady"><span class="label svelte-17xzady">Load preset:</span> <!></div>');function Ut(e,t){Y(t,!1);const a=Object.keys(Be);function l(s){const u=jt(s);u&&(n.loadStructure(u),n.save())}wt();var i=Ht(),v=_(h(i),2);$(v,1,()=>a,Q,(s,u)=>{var r=zt(),o=h(r,!0);p(r),q(()=>P(o,c(u))),U("click",r,()=>l(c(u))),T(s,r)}),p(i),T(e,i),G()}ne(["click"]);var Vt=I('<span class="level-num svelte-ap3gho"> </span> <span class="blinds svelte-ap3gho"> </span> <span class="ante svelte-ap3gho"> </span> <span class="duration svelte-ap3gho"> </span>',1),Wt=I('<span class="break-label svelte-ap3gho">Break</span> <span class="duration svelte-ap3gho"> </span>',1),Kt=I('<div class="actions svelte-ap3gho"><button title="Move up" class="svelte-ap3gho">&uarr;</button> <button title="Move down" class="svelte-ap3gho">&darr;</button> <button class="remove svelte-ap3gho" title="Remove">&times;</button></div>'),Yt=I("<div><!> <!></div>");function Gt(e,t){Y(t,!0);var a=Yt();let l;var i=h(a);{var v=o=>{var f=Vt(),g=le(f),m=h(g);p(g);var B=_(g,2),k=h(B);p(B);var w=_(B,2),d=h(w);p(w);var b=_(w,2),y=h(b);p(b),q(()=>{P(m,`Level ${t.level.level??""}`),P(k,`${t.level.smallBlind??""}/${t.level.bigBlind??""}`),P(d,`Ante: ${t.level.ante??""}`),P(y,`${t.level.duration??""} min`)}),T(o,f)},s=o=>{var f=Wt(),g=_(le(f),2),m=h(g);p(g),q(()=>P(m,`${t.level.duration??""} min`)),T(o,f)};z(i,o=>{t.level.type==="round"?o(v):o(s,!1)})}var u=_(i,2);{var r=o=>{var f=Kt(),g=h(f),m=_(g,2),B=_(m,2);p(f),q(()=>{g.disabled=t.isFirst,m.disabled=t.isLast}),U("click",g,()=>t.onMoveUp(t.index)),U("click",m,()=>t.onMoveDown(t.index)),U("click",B,()=>t.onRemove(t.index)),T(o,f)};z(u,o=>{t.disabled||o(r)})}p(a),q(()=>l=ue(a,1,"level-row svelte-ap3gho",null,l,{"is-break":t.level.type==="break"})),T(e,a),G()}ne(["click"]);var Xt=I('<div class="add-controls svelte-q0tpu6"><fieldset class="svelte-q0tpu6"><legend class="svelte-q0tpu6">Add Round</legend> <label class="svelte-q0tpu6">Small <input type="number" min="1" class="svelte-q0tpu6"/></label> <label class="svelte-q0tpu6">Big <input type="number" min="1" class="svelte-q0tpu6"/></label> <label class="svelte-q0tpu6">Ante <input type="number" min="0" class="svelte-q0tpu6"/></label> <label class="svelte-q0tpu6">Min <input type="number" min="1" class="svelte-q0tpu6"/></label> <button class="svelte-q0tpu6">Add Round</button></fieldset> <fieldset class="svelte-q0tpu6"><legend class="svelte-q0tpu6">Add Break</legend> <label class="svelte-q0tpu6">Min <input type="number" min="1" class="svelte-q0tpu6"/></label> <button class="svelte-q0tpu6">Add Break</button></fieldset></div>'),Zt=I('<!> <div class="level-list svelte-q0tpu6"></div> <!>',1);function Jt(e,t){Y(t,!0);let a=W(25),l=W(50),i=W(0),v=W(20),s=W(10);const u=j(()=>n.status!=="setup");function r(){n.addRound({smallBlind:c(a),bigBlind:c(l),ante:c(i),duration:c(v)}),n.save()}function o(){n.addBreak(c(s)),n.save()}function f(x){n.removeLevel(x),n.save()}function g(x){n.moveLevelUp(x),n.save()}function m(x){n.moveLevelDown(x),n.save()}var B=Zt(),k=le(B);{var w=x=>{Ut(x,{})};z(k,x=>{c(u)||x(w)})}var d=_(k,2);$(d,21,()=>n.structure,Q,(x,A,S)=>{{let N=j(()=>S===n.structure.length-1);Gt(x,{get level(){return c(A)},index:S,onRemove:f,onMoveUp:g,onMoveDown:m,isFirst:S===0,get isLast(){return c(N)},get disabled(){return c(u)}})}}),p(d);var b=_(d,2);{var y=x=>{var A=Xt(),S=h(A),N=_(h(S),2),M=_(h(N));te(M),p(N);var R=_(N,2),O=_(h(R));te(O),p(R);var E=_(R,2),L=_(h(E));te(L),p(E);var C=_(E,2),F=_(h(C));te(F),p(C);var X=_(C,2);p(S);var H=_(S,2),re=_(h(H),2),ie=_(h(re));te(ie),p(re);var de=_(re,2);p(H),p(A),ae(M,()=>c(a),V=>D(a,V)),ae(O,()=>c(l),V=>D(l,V)),ae(L,()=>c(i),V=>D(i,V)),ae(F,()=>c(v),V=>D(v,V)),U("click",X,r),ae(ie,()=>c(s),V=>D(s,V)),U("click",de,o),T(x,A)};z(b,x=>{c(u)||x(y)})}T(e,B),G()}ne(["click"]);var Qt=I('<span class="status svelte-1n9lh6">Eliminated</span>'),$t=I('<button class="remove svelte-1n9lh6">&times;</button>'),ea=I('<li><span class="name svelte-1n9lh6"> </span> <!> <!></li>'),ta=I('<div class="players-tab"><div class="add-player svelte-1n9lh6"><input type="text" placeholder="Player name" class="svelte-1n9lh6"/> <button class="svelte-1n9lh6">Add Player</button></div> <p class="count svelte-1n9lh6"> </p> <ul class="player-list svelte-1n9lh6"></ul></div>');function aa(e,t){Y(t,!0);let a=W("");function l(){const k=c(a).trim();k&&(n.addPlayer(k),n.save(),D(a,""))}function i(k){n.removePlayer(k),n.save()}function v(k){k.key==="Enter"&&l()}const s=j(()=>n.status==="setup");var u=ta(),r=h(u),o=h(r);te(o);var f=_(o,2);p(r);var g=_(r,2),m=h(g);p(g);var B=_(g,2);$(B,21,()=>n.players,Q,(k,w)=>{var d=ea();let b;var y=h(d),x=h(y,!0);p(y);var A=_(y,2);{var S=R=>{var O=Qt();T(R,O)};z(A,R=>{c(w).status==="eliminated"&&R(S)})}var N=_(A,2);{var M=R=>{var O=$t();U("click",O,()=>i(c(w).id)),T(R,O)};z(N,R=>{c(s)&&R(M)})}p(d),q(()=>{b=ue(d,1,"svelte-1n9lh6",null,b,{eliminated:c(w).status==="eliminated"}),P(x,c(w).name)}),T(k,d)}),p(B),p(u),q(()=>P(m,`${n.players.length??""} players registered
    (${n.activePlayers.length??""} active)`)),U("keydown",o,v),ae(o,()=>c(a),k=>D(a,k)),U("click",f,l),T(e,u),G()}ne(["keydown","click"]);function xe(e){const t=[...e];for(let a=t.length-1;a>0;a--){const l=Math.floor(Math.random()*(a+1));[t[a],t[l]]=[t[l],t[a]]}return t}function na(e,t){const a=e.filter(s=>s.status==="active"),l=xe(a),i=Math.ceil(l.length/t),v=Array.from({length:i},(s,u)=>({id:`t${u+1}`,name:`Table ${u+1}`,seats:t}));for(const s of e)s.tableId=null,s.seat=null;l.forEach((s,u)=>{const r=u%i;s.tableId=v[r].id});for(const s of v){const u=l.filter(o=>o.tableId===s.id),r=xe(Array.from({length:t},(o,f)=>f+1));u.forEach((o,f)=>{o.seat=r[f]})}return{tables:v,players:e}}function la(e,t){const a=e.filter(u=>u.status==="active"),l=t.filter(u=>a.some(r=>r.tableId===u.id)),i=[];for(const u of l){const r=a.filter(o=>o.tableId===u.id);if(r.length<=1&&l.length>1)for(const o of r){const g=l.filter(k=>k.id!==u.id).reduce((k,w)=>{const d=a.filter(y=>y.tableId===k.id).length,b=a.filter(y=>y.tableId===w.id).length;return d<=b?k:w}),m=a.filter(k=>k.tableId===g.id).map(k=>k.seat),B=Array.from({length:g.seats},(k,w)=>w+1).find(k=>!m.includes(k));i.push({playerId:o.id,from:u.name,to:g.name}),o.tableId=g.id,o.seat=B}}const v=t.filter(u=>a.some(r=>r.tableId===u.id));let s=!1;for(;!s;){const u=v.map(f=>({table:f,count:a.filter(g=>g.tableId===f.id).length})),r=u.reduce((f,g)=>f.count>=g.count?f:g),o=u.reduce((f,g)=>f.count<=g.count?f:g);if(r.count-o.count>1){const f=a.filter(k=>k.tableId===r.table.id),g=f[Math.floor(Math.random()*f.length)],m=a.filter(k=>k.tableId===o.table.id).map(k=>k.seat),B=Array.from({length:o.table.seats},(k,w)=>w+1).find(k=>!m.includes(k));i.push({playerId:g.id,from:r.table.name,to:o.table.name}),g.tableId=o.table.id,g.seat=B}else s=!0}return{moves:i,tables:v}}function ra(e,t,a){const l=e.filter(r=>r.status==="active");if(l.length>a)return null;const i=t.filter(r=>l.some(o=>o.tableId===r.id));if(i.length<=1)return null;const v=i[0];v.name="Final Table";const s=[];for(const r of l)r.tableId!==v.id&&(s.push({playerId:r.id,from:t.find(o=>o.id===r.tableId)?.name,to:"Final Table"}),r.tableId=v.id);const u=xe(Array.from({length:v.seats},(r,o)=>o+1));return l.forEach((r,o)=>{r.seat=u[o]}),{finalTable:v,moves:s}}var ia=I('<li class="svelte-1hud1it"> </li>'),sa=I('<div class="table-view svelte-1hud1it"><h3 class="svelte-1hud1it"> </h3> <p class="count svelte-1hud1it"> </p> <ul class="svelte-1hud1it"></ul></div>');function oa(e,t){Y(t,!0);const a=j(()=>t.players.filter(o=>o.tableId===t.table.id&&o.status==="active").sort((o,f)=>o.seat-f.seat));var l=sa(),i=h(l),v=h(i,!0);p(i);var s=_(i,2),u=h(s);p(s);var r=_(s,2);$(r,21,()=>c(a),Q,(o,f)=>{var g=ia(),m=h(g);p(g),q(()=>P(m,`Seat ${c(f).seat??""}: ${c(f).name??""}`)),T(o,g)}),p(r),p(l),q(()=>{P(v,t.table.name),P(u,`${c(a).length??""} / ${t.table.seats??""} seats`)}),T(e,l),G()}var va=I('<p class="notification svelte-10fr8jr"> </p>'),ua=I('<div class="tables-grid svelte-10fr8jr"></div>'),ca=I('<p class="empty svelte-10fr8jr">No tables assigned yet. Register players and click "Assign Tables".</p>'),da=I('<div class="table-setup"><div class="settings svelte-10fr8jr"><label class="svelte-10fr8jr">Max players per table: <input type="number" min="2" max="10" class="svelte-10fr8jr"/></label> <label class="svelte-10fr8jr">Final table at: <input type="number" min="2" max="20" class="svelte-10fr8jr"/> <span class="hint svelte-10fr8jr">players</span></label></div> <button class="assign-btn svelte-10fr8jr">Assign Tables</button> <!> <!></div>');function fa(e,t){Y(t,!0);let a=W("");const l=j(()=>n.activePlayers.length>=2&&n.status!=="running");function i(){const b=na(n.players,n.tableSize);n.tables=b.tables,n.save(),D(a,`Assigned ${n.activePlayers.length} players to ${b.tables.length} table(s).`),setTimeout(()=>D(a,""),3e3)}var v=da(),s=h(v),u=h(s),r=_(h(u));te(r),p(u);var o=_(u,2),f=_(h(o));te(f),Bt(2),p(o),p(s);var g=_(s,2),m=_(g,2);{var B=b=>{var y=va(),x=h(y,!0);p(y),q(()=>P(x,c(a))),T(b,y)};z(m,b=>{c(a)&&b(B)})}var k=_(m,2);{var w=b=>{var y=ua();$(y,21,()=>n.tables,Q,(x,A)=>{oa(x,{get table(){return c(A)},get players(){return n.players}})}),p(y),T(b,y)},d=b=>{var y=ca();T(b,y)};z(k,b=>{n.tables.length>0?b(w):b(d,!1)})}p(v),q(()=>g.disabled=!c(l)),ae(r,()=>n.tableSize,b=>n.tableSize=b),ae(f,()=>n.finalTableThreshold,b=>n.finalTableThreshold=b),U("click",g,i),T(e,v),G()}ne(["click"]);function ba(e=null){let t=!1,a=e;function l(){return a||(a=new(window.AudioContext||window.webkitAudioContext)),a}function i(v,s,u="sine"){if(t)return;const r=l(),o=r.createOscillator(),f=r.createGain();o.type=u,o.frequency.setValueAtTime(v,r.currentTime),f.gain.setValueAtTime(.3,r.currentTime),o.connect(f),f.connect(r.destination),o.start(),o.stop(r.currentTime+s)}return{get isMuted(){return t},mute(){t=!0},unmute(){t=!1},toggleMute(){t=!t},playRoundEnd(){i(880,.5)},playBreakEnd(){i(660,.5)},playWarning(){i(440,.3)}}}var ma=I('<span class="ante svelte-xbucwj"> </span>'),ga=I('<span class="blinds svelte-xbucwj"> </span> <!>',1),pa=I('<span class="break-text svelte-xbucwj">Break</span>'),_a=I('<div class="level-info svelte-xbucwj"><span class="label svelte-xbucwj"> </span> <!></div>');function Pe(e,t){Y(t,!0);var a=Ue(),l=le(a);{var i=v=>{var s=_a(),u=h(s),r=h(u,!0);p(u);var o=_(u,2);{var f=m=>{var B=ga(),k=le(B),w=h(k);p(k);var d=_(k,2);{var b=y=>{var x=ma(),A=h(x);p(x),q(()=>P(A,`Ante: ${t.level.ante??""}`)),T(y,x)};z(d,y=>{t.level.ante>0&&y(b)})}q(()=>P(w,`Blinds: ${t.level.smallBlind??""}/${t.level.bigBlind??""}`)),T(m,B)},g=m=>{var B=pa();T(m,B)};z(o,m=>{t.level.type==="round"?m(f):m(g,!1)})}p(s),q(()=>P(r,t.label)),T(v,s)};z(l,v=>{t.level&&v(i)})}T(e,a),G()}var ha=I('<div class="controls svelte-1bc6657"><button title="Previous level" class="svelte-1bc6657">&laquo; Prev</button> <button class="play-pause svelte-1bc6657"> </button> <button title="Next level" class="svelte-1bc6657">Next &raquo;</button> <button class="mute svelte-1bc6657"> </button></div>');function ka(e,t){var a=ha(),l=h(a),i=_(l,2),v=h(i,!0);p(i);var s=_(i,2),u=_(s,2),r=h(u,!0);p(u),p(a),q(()=>{l.disabled=!t.canPrev,P(v,t.isRunning?"Pause":"Play"),s.disabled=!t.canNext,ye(u,"title",t.isMuted?"Unmute":"Mute"),P(r,t.isMuted?"Unmute":"Mute")}),U("click",l,function(...o){t.onPrev?.apply(this,o)}),U("click",i,function(...o){t.onToggle?.apply(this,o)}),U("click",s,function(...o){t.onNext?.apply(this,o)}),U("click",u,function(...o){t.onToggleMute?.apply(this,o)}),T(e,a)}ne(["click"]);var ya=I('<p class="empty svelte-1hmdg4r">Set up the tournament structure first.</p>'),Ba=I('<div class="break-banner svelte-1hmdg4r">BREAK</div>'),xa=I('<!> <!> <div class="timer svelte-1hmdg4r"> </div> <!> <!>',1),Ta=I("<div><!></div>");function Ia(e,t){Y(t,!0);let a=W(null),l=null,i=!1;xt(()=>{D(a,ba(),!0),document.addEventListener("visibilitychange",v),n.clock.isRunning&&(i=n.clock.timeRemaining<=60,l=setInterval(b,500))}),Tt(()=>{l&&clearInterval(l),document.removeEventListener("visibilitychange",v)});function v(){!document.hidden&&n.clock.isRunning&&b()}const s=j(()=>n.structure[n.clock.currentLevelIndex]),u=j(()=>n.structure[n.clock.currentLevelIndex+1]),r=j(()=>n.clock.currentLevelIndex>0),o=j(()=>n.clock.currentLevelIndex<n.structure.length-1),f=j(()=>c(s)?.type==="break"),g=j(()=>Math.floor(n.clock.timeRemaining/60)),m=j(()=>n.clock.timeRemaining%60),B=j(()=>`${String(c(g)).padStart(2,"0")}:${String(c(m)).padStart(2,"0")}`);function k(){n.clock.startTimestamp=Date.now(),n.clock.timeRemainingAtStart=n.clock.timeRemaining,i=n.clock.timeRemaining<=60,l=setInterval(b,500)}function w(){clearInterval(l),l=null}function d(){n.structure.length!==0&&(n.clock.isRunning?(n.clock.isRunning=!1,w()):(n.status==="setup"&&(n.status="running",n.clock.timeRemaining=c(s).duration*60),n.clock.isRunning=!0,k()),n.save())}function b(){const E=Math.floor((Date.now()-n.clock.startTimestamp)/1e3);let L=n.clock.timeRemainingAtStart-E;for(;L<=0;){const C=n.clock.currentLevelIndex;if(C>=n.structure.length-1){n.clock.timeRemaining=0,n.clock.isRunning=!1,w(),n.status="finished",n.save();return}const F=n.structure[C]?.type==="break";n.clock.currentLevelIndex++;const H=n.structure[n.clock.currentLevelIndex].duration*60;L=H+L,n.clock.startTimestamp=Date.now()-(H-L)*1e3,n.clock.timeRemainingAtStart=H,i=L<=60,c(a)&&(F?c(a).playBreakEnd():c(a).playRoundEnd()),n.save()}!i&&L<=60&&c(a)&&(c(a).playWarning(),i=!0),n.clock.timeRemaining=L}function y(){const E=n.clock.currentLevelIndex;if(E>=n.structure.length-1){n.clock.isRunning=!1,w(),n.status="finished",n.save();return}const L=n.structure[E]?.type==="break";n.clock.currentLevelIndex++;const C=n.structure[n.clock.currentLevelIndex];n.clock.timeRemaining=C.duration*60,n.clock.isRunning&&(n.clock.startTimestamp=Date.now(),n.clock.timeRemainingAtStart=n.clock.timeRemaining,i=!1),c(a)&&(L?c(a).playBreakEnd():c(a).playRoundEnd()),n.save()}function x(){if(!c(r))return;n.clock.currentLevelIndex--;const E=n.structure[n.clock.currentLevelIndex];n.clock.timeRemaining=E.duration*60,n.clock.isRunning&&(n.clock.startTimestamp=Date.now(),n.clock.timeRemainingAtStart=n.clock.timeRemaining,i=!1),n.save()}function A(){c(o)&&y()}var S=Ta();let N;var M=h(S);{var R=E=>{var L=ya();T(E,L)},O=E=>{var L=xa(),C=le(L);{var F=V=>{var He=Ba();T(V,He)};z(C,V=>{c(f)&&V(F)})}var X=_(C,2);Pe(X,{get level(){return c(s)},label:"Current"});var H=_(X,2),re=h(H,!0);p(H);var ie=_(H,2);Pe(ie,{get level(){return c(u)},label:"Next"});var de=_(ie,2);{let V=j(()=>c(a)?.isMuted??!1);ka(de,{get isRunning(){return n.clock.isRunning},onToggle:d,onPrev:x,onNext:A,get canPrev(){return c(r)},get canNext(){return c(o)},get isMuted(){return c(V)},onToggleMute:()=>c(a)?.toggleMute()})}q(()=>P(re,c(B))),T(E,L)};z(M,E=>{n.structure.length===0?E(R):E(O,!1)})}p(S),q(()=>N=ue(S,1,"clock-tab svelte-1hmdg4r",null,N,{"is-break":c(f)})),T(e,S),G()}var wa=I('<tr><td class="svelte-e9v8ke"> </td><td class="svelte-e9v8ke"> </td><td class="svelte-e9v8ke"> </td><td class="svelte-e9v8ke"><!></td></tr>'),Ea=I('<div class="log"><h3 class="svelte-e9v8ke">Standings</h3> <table class="svelte-e9v8ke"><thead><tr><th class="svelte-e9v8ke">#</th><th class="svelte-e9v8ke">Player</th><th class="svelte-e9v8ke">Status</th><th class="svelte-e9v8ke">Eliminated By</th></tr></thead><tbody></tbody></table></div>');function Aa(e,t){Y(t,!0);const a=j(()=>n.standings);function l(u){return n.players.find(r=>r.id===u)?.name??"?"}var i=Ea(),v=_(h(i),2),s=_(h(v));$(s,21,()=>c(a),Q,(u,r)=>{var o=wa();let f;var g=h(o),m=h(g,!0);p(g);var B=_(g),k=h(B,!0);p(B);var w=_(B),d=h(w,!0);p(w);var b=_(w),y=h(b);{var x=S=>{const N=j(()=>n.eliminations.find(R=>R.playerId===c(r).id));var M=Ie();q(R=>P(M,R),[()=>c(N)?.eliminatedBy?l(c(N).eliminatedBy):"-"]),T(S,M)},A=S=>{var N=Ie("-");T(S,N)};z(y,S=>{c(r).status==="eliminated"?S(x):S(A,!1)})}p(b),p(o),q(()=>{f=ue(o,1,"svelte-e9v8ke",null,f,{eliminated:c(r).status==="eliminated"}),P(m,c(r).position),P(k,c(r).name),P(d,c(r).status==="active"?"Playing":"Out")}),T(u,o)}),p(s),p(v),p(i),T(e,i),G()}var Sa=I("<option> </option>"),Ra=I("<option> </option>"),Ma=I('<div class="form svelte-2nklbm"><label class="svelte-2nklbm">Eliminated: <select class="svelte-2nklbm"><option>Select player...</option><!></select></label> <label class="svelte-2nklbm">By: <select class="svelte-2nklbm"><option>Select eliminator...</option><!></select></label> <button class="svelte-2nklbm">Eliminate</button></div>'),La=I('<p class="winner svelte-2nklbm"> </p>'),Pa=I('<p class="empty svelte-2nklbm">No active players.</p>'),Na=I('<p class="notification svelte-2nklbm"> </p>'),qa=I('<div class="elimination-panel"><!> <!> <!></div>');function Ca(e,t){Y(t,!0);let a=W(""),l=W(""),i=W("");const v=j(()=>n.activePlayers),s=j(()=>c(v).filter(d=>d.id!==c(a)));function u(){if(!c(a)||!c(l))return;n.eliminatePlayer(c(a),c(l));const d=ra(n.players,n.tables,n.finalTableThreshold);if(d)D(i,`Final Table! ${d.moves.length} player(s) moved.`);else{const{moves:b}=la(n.players,n.tables);b.length>0?D(i,b.map(y=>`${n.players.find(x=>x.id===y.playerId)?.name} moved from ${y.from} to ${y.to}`).join(". "),!0):D(i,"")}n.save(),D(a,""),D(l,""),n.activePlayers.length===1&&(D(i,`Tournament over! Winner: ${n.activePlayers[0].name}`),n.status="finished",n.save()),c(i)&&setTimeout(()=>D(i,""),5e3)}var r=qa(),o=h(r);{var f=d=>{var b=Ma(),y=h(b),x=_(h(y)),A=h(x);A.value=A.__value="";var S=_(A);$(S,17,()=>c(v),Q,(L,C)=>{var F=Sa(),X=h(F,!0);p(F);var H={};q(()=>{P(X,c(C).name),H!==(H=c(C).id)&&(F.value=(F.__value=c(C).id)??"")}),T(L,F)}),p(x),p(y);var N=_(y,2),M=_(h(N)),R=h(M);R.value=R.__value="";var O=_(R);$(O,17,()=>c(s),Q,(L,C)=>{var F=Ra(),X=h(F,!0);p(F);var H={};q(()=>{P(X,c(C).name),H!==(H=c(C).id)&&(F.value=(F.__value=c(C).id)??"")}),T(L,F)}),p(M),p(N);var E=_(N,2);p(b),q(()=>E.disabled=!c(a)||!c(l)),Me(x,()=>c(a),L=>D(a,L)),Me(M,()=>c(l),L=>D(l,L)),U("click",E,u),T(d,b)},g=d=>{var b=La(),y=h(b);p(b),q(()=>P(y,`Winner: ${c(v)[0].name??""}`)),T(d,b)},m=d=>{var b=Pa();T(d,b)};z(o,d=>{c(v).length>1?d(f):c(v).length===1?d(g,1):d(m,!1)})}var B=_(o,2);{var k=d=>{var b=Na(),y=h(b,!0);p(b),q(()=>P(y,c(i))),T(d,b)};z(B,d=>{c(i)&&d(k)})}var w=_(B,2);Aa(w,{}),p(r),T(e,r),G()}ne(["click"]);var Da=I('<!> <div class="tab-content svelte-1uha8ag"><!></div>',1);function Wa(e){const t=[{id:"structure",label:"Structure"},{id:"players",label:"Players"},{id:"tables",label:"Tables"},{id:"clock",label:"Clock"},{id:"eliminations",label:"Eliminations"}];let a=W("structure");var l=Da(),i=le(l);Ft(i,{get tabs(){return t},get activeTab(){return c(a)},set activeTab(m){D(a,m,!0)}});var v=_(i,2),s=h(v);{var u=m=>{Jt(m,{})},r=m=>{aa(m,{})},o=m=>{fa(m,{})},f=m=>{Ia(m,{})},g=m=>{Ca(m,{})};z(s,m=>{c(a)==="structure"?m(u):c(a)==="players"?m(r,1):c(a)==="tables"?m(o,2):c(a)==="clock"?m(f,3):c(a)==="eliminations"&&m(g,4)})}p(v),T(e,l)}export{Wa as component};
