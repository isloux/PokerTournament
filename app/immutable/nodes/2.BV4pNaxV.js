import{d as ue,a as A,f as P,s as x,c as Y,e as ot,t as qe}from"../chunks/DLX6z-bw.js";import{A as xe,H as ut,C as te,Q as Be,aw as vt,I as ct,g as v,K as dt,N as ft,O as Ce,R as Te,E as ge,aE as bt,aL as mt,ap as De,w as ae,aN as le,B as Re,aO as _t,G as gt,m as pt,aP as Ue,aK as Me,aQ as ht,aR as kt,a7 as yt,aa as Oe,aS as xt,x as We,z as Ke,aT as we,aU as Bt,aI as Tt,y as wt,aF as It,aV as Ye,a4 as Ge,aW as Et,aX as Xe,a2 as Rt,aY as Qe,aZ as St,a_ as At,a$ as Lt,b0 as Mt,b1 as Pt,b2 as Nt,b3 as qt,b4 as Ct,b5 as Dt,a8 as Ot,b as Ft,a3 as jt,T as Z,W as J,Y as b,X as m,V as q,Z as h,U as ve,a1 as z,_ as $,s as V,a0 as zt,b6 as Ht}from"../chunks/BlHtbM2a.js";import{i as W}from"../chunks/DApGd3tl.js";import{p as Vt}from"../chunks/CzgcBuyY.js";import{a as k,t as n}from"../chunks/CBqlHRGD.js";import"../chunks/BQXVPlSi.js";import{i as Ut}from"../chunks/Bc-cfwtG.js";function ne(e,t){return t}function Wt(e,t,a){for(var l=[],o=t.length,r,u=t.length,c=0;c<o;c++){let g=t[c];Ke(g,()=>{if(r){if(r.pending.delete(g),r.done.add(g),r.pending.size===0){var y=e.outrogroups;Se(Me(r.done)),y.delete(r),y.size===0&&(e.outrogroups=null)}}else u-=1},!1)}if(u===0){var s=l.length===0&&a!==null;if(s){var i=a,d=i.parentNode;Tt(d),d.append(i),e.items.clear()}Se(t,!s)}else r={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(r)}function Se(e,t=!0){for(var a=0;a<e.length;a++)wt(e[a],t)}var Fe;function re(e,t,a,l,o,r=null){var u=e,c=new Map,s=(t&Ye)!==0;if(s){var i=e;u=te?Be(vt(i)):i.appendChild(xe())}te&&ct();var d=null,g=pt(()=>{var _=a();return Ue(_)?_:_==null?[]:Me(_)}),y,p=!0;function B(){f.fallback=d,Kt(f,y,u,t,l),d!==null&&(y.length===0?(d.f&le)===0?We(d):(d.f^=le,fe(d,null,u)):Ke(d,()=>{d=null}))}var T=ut(()=>{y=v(g);var _=y.length;let E=!1;if(te){var w=dt(u)===ft;w!==(_===0)&&(u=Ce(),Be(u),Te(!1),E=!0)}for(var S=new Set,M=ae,R=gt(),L=0;L<_;L+=1){te&&ge.nodeType===bt&&ge.data===mt&&(u=ge,E=!0,Te(!1));var D=y[L],C=l(D,L),I=p?null:c.get(C);I?(I.v&&De(I.v,D),I.i&&De(I.i,L),R&&M.unskip_effect(I.e)):(I=Yt(c,p?u:Fe??=xe(),D,C,L,o,t,a),p||(I.e.f|=le),c.set(C,I)),S.add(C)}if(_===0&&r&&!d&&(p?d=Re(()=>r(u)):(d=Re(()=>r(Fe??=xe())),d.f|=le)),_>S.size&&_t(),te&&_>0&&Be(Ce()),!p)if(R){for(const[N,H]of c)S.has(N)||M.skip_effect(H.e);M.oncommit(B),M.ondiscard(()=>{})}else B();E&&Te(!0),v(g)}),f={effect:T,items:c,outrogroups:null,fallback:d};p=!1,te&&(u=ge)}function de(e){for(;e!==null&&(e.f&Bt)===0;)e=e.next;return e}function Kt(e,t,a,l,o){var r=(l&Et)!==0,u=t.length,c=e.items,s=de(e.effect.first),i,d=null,g,y=[],p=[],B,T,f,_;if(r)for(_=0;_<u;_+=1)B=t[_],T=o(B,_),f=c.get(T).e,(f.f&le)===0&&(f.nodes?.a?.measure(),(g??=new Set).add(f));for(_=0;_<u;_+=1){if(B=t[_],T=o(B,_),f=c.get(T).e,e.outrogroups!==null)for(const I of e.outrogroups)I.pending.delete(f),I.done.delete(f);if((f.f&le)!==0)if(f.f^=le,f===s)fe(f,null,a);else{var E=d?d.next:s;f===e.effect.last&&(e.effect.last=f.prev),f.prev&&(f.prev.next=f.next),f.next&&(f.next.prev=f.prev),se(e,d,f),se(e,f,E),fe(f,E,a),d=f,y=[],p=[],s=de(d.next);continue}if((f.f&we)!==0&&(We(f),r&&(f.nodes?.a?.unfix(),(g??=new Set).delete(f))),f!==s){if(i!==void 0&&i.has(f)){if(y.length<p.length){var w=p[0],S;d=w.prev;var M=y[0],R=y[y.length-1];for(S=0;S<y.length;S+=1)fe(y[S],w,a);for(S=0;S<p.length;S+=1)i.delete(p[S]);se(e,M.prev,R.next),se(e,d,M),se(e,R,w),s=w,d=R,_-=1,y=[],p=[]}else i.delete(f),fe(f,s,a),se(e,f.prev,f.next),se(e,f,d===null?e.effect.first:d.next),se(e,d,f),d=f;continue}for(y=[],p=[];s!==null&&s!==f;)(i??=new Set).add(s),p.push(s),s=de(s.next);if(s===null)continue}(f.f&le)===0&&y.push(f),d=f,s=de(f.next)}if(e.outrogroups!==null){for(const I of e.outrogroups)I.pending.size===0&&(Se(Me(I.done)),e.outrogroups?.delete(I));e.outrogroups.size===0&&(e.outrogroups=null)}if(s!==null||i!==void 0){var L=[];if(i!==void 0)for(f of i)(f.f&we)===0&&L.push(f);for(;s!==null;)(s.f&we)===0&&s!==e.fallback&&L.push(s),s=de(s.next);var D=L.length;if(D>0){var C=(l&Ye)!==0&&u===0?a:null;if(r){for(_=0;_<D;_+=1)L[_].nodes?.a?.measure();for(_=0;_<D;_+=1)L[_].nodes?.a?.fix()}Wt(e,L,C)}}r&&Ge(()=>{if(g!==void 0)for(f of g)f.nodes?.a?.apply()})}function Yt(e,t,a,l,o,r,u,c){var s=(u&ht)!==0?(u&kt)===0?yt(a,!1,!1):Oe(a):null,i=(u&xt)!==0?Oe(o):null;return{v:s,i,e:Re(()=>(r(t,s??a,i??o,c),()=>{e.delete(l)}))}}function fe(e,t,a){if(e.nodes)for(var l=e.nodes.start,o=e.nodes.end,r=t&&(t.f&le)===0?t.nodes.start:a;l!==null;){var u=It(l);if(r.before(l),l===o)return;l=u}}function se(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}const je=[...` 	
\r\f \v\uFEFF`];function Gt(e,t,a){var l=e==null?"":""+e;if(a){for(var o of Object.keys(a))if(a[o])l=l?l+" "+o:o;else if(l.length)for(var r=o.length,u=0;(u=l.indexOf(o,u))>=0;){var c=u+r;(u===0||je.includes(l[u-1]))&&(c===l.length||je.includes(l[c]))?l=(u===0?"":l.substring(0,u))+l.substring(c+1):u=c}}return l===""?null:l}function me(e,t,a,l,o,r){var u=e.__className;if(te||u!==a||u===void 0){var c=Gt(a,l,r);(!te||c!==e.getAttribute("class"))&&(c==null?e.removeAttribute("class"):e.className=c),e.__className=a}else if(r&&o!==r)for(var s in r){var i=!!r[s];(o==null||i!==!!o[s])&&e.classList.toggle(s,i)}return r}function Ze(e,t,a=!1){if(e.multiple){if(t==null)return;if(!Ue(t))return St();for(var l of e.options)l.selected=t.includes(be(l));return}for(l of e.options){var o=be(l);if(At(o,t)){l.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Xt(e){var t=new MutationObserver(()=>{Ze(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Lt(()=>{t.disconnect()})}function ze(e,t,a=t){var l=new WeakSet,o=!0;Xe(e,"change",r=>{var u=r?"[selected]":":checked",c;if(e.multiple)c=[].map.call(e.querySelectorAll(u),be);else{var s=e.querySelector(u)??e.querySelector("option:not([disabled])");c=s&&be(s)}a(c),ae!==null&&l.add(ae)}),Rt(()=>{var r=t();if(e===document.activeElement){var u=Qe??ae;if(l.has(u))return}if(Ze(e,r,o),o&&r===void 0){var c=e.querySelector(":checked");c!==null&&(r=be(c),a(r))}e.__value=r,o=!1}),Xt(e)}function be(e){return"__value"in e?e.__value:e.value}const Qt=Symbol("is custom element"),Zt=Symbol("is html"),Jt=Dt?"link":"LINK";function ie(e){if(te){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var l=e.value;ce(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var o=e.checked;ce(e,"checked",null),e.checked=o}}};e.__on_r=a,Ge(a),Mt()}}function ce(e,t,a,l){var o=$t(e);te&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName===Jt)||o[t]!==(o[t]=a)&&(t==="loading"&&(e[qt]=a),a==null?e.removeAttribute(t):typeof a!="string"&&ea(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function $t(e){return e.__attributes??={[Qt]:e.nodeName.includes("-"),[Zt]:e.namespaceURI===Pt}}var He=new Map;function ea(e){var t=e.getAttribute("is")||e.nodeName,a=He.get(t);if(a)return a;He.set(t,a=[]);for(var l,o=e,r=Element.prototype;r!==o;){l=Ct(o);for(var u in l)l[u].set&&a.push(u);o=Nt(o)}return a}function oe(e,t,a=t){var l=new WeakSet;Xe(e,"input",async o=>{var r=o?e.defaultValue:e.value;if(r=Ie(e)?Ee(r):r,a(r),ae!==null&&l.add(ae),await Ot(),r!==(r=t())){var u=e.selectionStart,c=e.selectionEnd,s=e.value.length;if(e.value=r??"",c!==null){var i=e.value.length;u===c&&c===s&&i>s?(e.selectionStart=i,e.selectionEnd=i):(e.selectionStart=u,e.selectionEnd=Math.min(c,i))}}}),(te&&e.defaultValue!==e.value||Ft(t)==null&&e.value)&&(a(Ie(e)?Ee(e.value):e.value),ae!==null&&l.add(ae)),jt(()=>{var o=t();if(e===document.activeElement){var r=Qe??ae;if(l.has(r))return}Ie(e)&&o===Ee(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function Ie(e){var t=e.type;return t==="number"||t==="range"}function Ee(e){return e===""?null:+e}var ta=P("<button> </button>"),aa=P('<nav class="tab-bar svelte-1wwzsr0"></nav>');function la(e,t){Z(t,!0);let a=Vt(t,"activeTab",15,"structure");var l=aa();re(l,21,()=>t.tabs,ne,(o,r)=>{var u=ta();let c;var s=m(u,!0);b(u),q(()=>{c=me(u,1,"tab svelte-1wwzsr0",null,c,{active:a()===v(r).id}),x(s,v(r).label)}),Y("click",u,()=>a(v(r).id)),A(o,u)}),b(l),A(e,l),J()}ue(["click"]);const Ae={quick:[{type:"round",smallBlind:25,bigBlind:50,ante:0,duration:10},{type:"round",smallBlind:50,bigBlind:100,ante:0,duration:10},{type:"break",duration:5},{type:"round",smallBlind:75,bigBlind:150,ante:0,duration:10},{type:"round",smallBlind:100,bigBlind:200,ante:25,duration:10},{type:"break",duration:5},{type:"round",smallBlind:150,bigBlind:300,ante:25,duration:10},{type:"round",smallBlind:200,bigBlind:400,ante:50,duration:10}],standard:[{type:"round",smallBlind:25,bigBlind:50,ante:0,duration:20},{type:"round",smallBlind:50,bigBlind:100,ante:0,duration:20},{type:"round",smallBlind:75,bigBlind:150,ante:0,duration:20},{type:"break",duration:10},{type:"round",smallBlind:100,bigBlind:200,ante:25,duration:20},{type:"round",smallBlind:150,bigBlind:300,ante:25,duration:20},{type:"round",smallBlind:200,bigBlind:400,ante:50,duration:20},{type:"break",duration:10},{type:"round",smallBlind:300,bigBlind:600,ante:75,duration:20},{type:"round",smallBlind:400,bigBlind:800,ante:100,duration:20},{type:"round",smallBlind:500,bigBlind:1e3,ante:100,duration:20}],deepStack:[{type:"round",smallBlind:25,bigBlind:50,ante:0,duration:30},{type:"round",smallBlind:50,bigBlind:100,ante:0,duration:30},{type:"round",smallBlind:75,bigBlind:150,ante:0,duration:30},{type:"break",duration:15},{type:"round",smallBlind:100,bigBlind:200,ante:0,duration:30},{type:"round",smallBlind:150,bigBlind:300,ante:25,duration:30},{type:"round",smallBlind:200,bigBlind:400,ante:25,duration:30},{type:"break",duration:15},{type:"round",smallBlind:300,bigBlind:600,ante:50,duration:30},{type:"round",smallBlind:400,bigBlind:800,ante:75,duration:30},{type:"round",smallBlind:500,bigBlind:1e3,ante:100,duration:30},{type:"break",duration:15},{type:"round",smallBlind:600,bigBlind:1200,ante:100,duration:30},{type:"round",smallBlind:800,bigBlind:1600,ante:200,duration:30}]};function na(e){return Ae[e]?structuredClone(Ae[e]):null}var ra=P('<button class="svelte-17xzady"> </button>'),sa=P('<div class="presets svelte-17xzady"><span class="label svelte-17xzady"> </span> <!></div>');function ia(e,t){Z(t,!1);const a=Object.keys(Ae);function l(s){const i=na(s);i&&(n.loadStructure(i),n.save())}Ut();var o=sa(),r=m(o),u=m(r,!0);b(r);var c=h(r,2);re(c,1,()=>a,ne,(s,i)=>{var d=ra(),g=m(d,!0);b(d),q(()=>x(g,v(i))),Y("click",d,()=>l(v(i))),A(s,d)}),b(o),q(s=>x(u,s),[()=>k("structure.loadPreset")]),A(e,o),J()}ue(["click"]);var oa=P('<span class="level-num svelte-ap3gho"> </span> <span class="blinds svelte-ap3gho"> </span> <span class="ante svelte-ap3gho"> </span> <span class="duration svelte-ap3gho"> </span>',1),ua=P('<span class="break-label svelte-ap3gho"> </span> <span class="duration svelte-ap3gho"> </span>',1),va=P('<div class="actions svelte-ap3gho"><button title="Move up" class="svelte-ap3gho">&uarr;</button> <button title="Move down" class="svelte-ap3gho">&darr;</button> <button class="remove svelte-ap3gho" title="Remove">&times;</button></div>'),ca=P("<div><!> <!></div>");function da(e,t){Z(t,!0);var a=ca();let l;var o=m(a);{var r=i=>{var d=oa(),g=ve(d),y=m(g);b(g);var p=h(g,2),B=m(p);b(p);var T=h(p,2),f=m(T);b(T);var _=h(T,2),E=m(_);b(_),q((w,S)=>{x(y,`${w??""} ${t.level.level??""}`),x(B,`${t.level.smallBlind??""}/${t.level.bigBlind??""}`),x(f,`${S??""}: ${t.level.ante??""}`),x(E,`${t.level.duration??""} min`)},[()=>k("structure.level"),()=>k("structure.ante")]),A(i,d)},u=i=>{var d=ua(),g=ve(d),y=m(g,!0);b(g);var p=h(g,2),B=m(p);b(p),q(T=>{x(y,T),x(B,`${t.level.duration??""} min`)},[()=>k("structure.break")]),A(i,d)};W(o,i=>{t.level.type==="round"?i(r):i(u,!1)})}var c=h(o,2);{var s=i=>{var d=va(),g=m(d),y=h(g,2),p=h(y,2);b(d),q(()=>{g.disabled=t.isFirst,y.disabled=t.isLast}),Y("click",g,()=>t.onMoveUp(t.index)),Y("click",y,()=>t.onMoveDown(t.index)),Y("click",p,()=>t.onRemove(t.index)),A(i,d)};W(c,i=>{t.disabled||i(s)})}b(a),q(()=>l=me(a,1,"level-row svelte-ap3gho",null,l,{"is-break":t.level.type==="break"})),A(e,a),J()}ue(["click"]);var fa=P('<div class="add-controls svelte-q0tpu6"><fieldset class="svelte-q0tpu6"><legend class="svelte-q0tpu6"> </legend> <label class="svelte-q0tpu6"> <input type="number" min="1" class="svelte-q0tpu6"/></label> <label class="svelte-q0tpu6"> <input type="number" min="1" class="svelte-q0tpu6"/></label> <label class="svelte-q0tpu6"> <input type="number" min="0" class="svelte-q0tpu6"/></label> <label class="svelte-q0tpu6"> <input type="number" min="1" class="svelte-q0tpu6"/></label> <button class="svelte-q0tpu6"> </button></fieldset> <fieldset class="svelte-q0tpu6"><legend class="svelte-q0tpu6"> </legend> <label class="svelte-q0tpu6"> <input type="number" min="1" class="svelte-q0tpu6"/></label> <button class="svelte-q0tpu6"> </button></fieldset></div>'),ba=P('<!> <div class="level-list svelte-q0tpu6"></div> <!>',1);function ma(e,t){Z(t,!0);let a=$(25),l=$(50),o=$(0),r=$(20),u=$(10);const c=z(()=>n.status!=="setup");function s(){n.addRound({smallBlind:v(a),bigBlind:v(l),ante:v(o),duration:v(r)}),n.save()}function i(){n.addBreak(v(u)),n.save()}function d(w){n.removeLevel(w),n.save()}function g(w){n.moveLevelUp(w),n.save()}function y(w){n.moveLevelDown(w),n.save()}var p=ba(),B=ve(p);{var T=w=>{ia(w,{})};W(B,w=>{v(c)||w(T)})}var f=h(B,2);re(f,21,()=>n.structure,ne,(w,S,M)=>{{let R=z(()=>M===n.structure.length-1);da(w,{get level(){return v(S)},index:M,onRemove:d,onMoveUp:g,onMoveDown:y,isFirst:M===0,get isLast(){return v(R)},get disabled(){return v(c)}})}}),b(f);var _=h(f,2);{var E=w=>{var S=fa(),M=m(S),R=m(M),L=m(R,!0);b(R);var D=h(R,2),C=m(D),I=h(C);ie(I),b(D);var N=h(D,2),H=m(N),Q=h(H);ie(Q),b(N);var G=h(N,2),X=m(G),K=h(X);ie(K),b(G);var O=h(G,2),F=m(O),j=h(F);ie(j),b(O);var U=h(O,2),pe=m(U,!0);b(U),b(M);var _e=h(M,2),he=m(_e),Je=m(he,!0);b(he);var ke=h(he,2),Pe=m(ke),Ne=h(Pe);ie(Ne),b(ke);var ye=h(ke,2),$e=m(ye,!0);b(ye),b(_e),b(S),q((ee,et,tt,at,lt,nt,rt,st,it)=>{x(L,ee),x(C,`${et??""} `),x(H,`${tt??""} `),x(X,`${at??""} `),x(F,`${lt??""} `),x(pe,nt),x(Je,rt),x(Pe,`${st??""} `),x($e,it)},[()=>k("structure.addRound"),()=>k("structure.small"),()=>k("structure.big"),()=>k("structure.ante"),()=>k("structure.duration"),()=>k("structure.addRound"),()=>k("structure.addBreak"),()=>k("structure.duration"),()=>k("structure.addBreak")]),oe(I,()=>v(a),ee=>V(a,ee)),oe(Q,()=>v(l),ee=>V(l,ee)),oe(K,()=>v(o),ee=>V(o,ee)),oe(j,()=>v(r),ee=>V(r,ee)),Y("click",U,s),oe(Ne,()=>v(u),ee=>V(u,ee)),Y("click",ye,i),A(w,S)};W(_,w=>{v(c)||w(E)})}A(e,p),J()}ue(["click"]);var _a=P('<span class="status svelte-1n9lh6"> </span>'),ga=P('<button class="remove svelte-1n9lh6">&times;</button>'),pa=P('<li><span class="name svelte-1n9lh6"> </span> <!> <!></li>'),ha=P('<div class="players-tab"><div class="add-player svelte-1n9lh6"><input type="text" class="svelte-1n9lh6"/> <button class="svelte-1n9lh6"> </button></div> <p class="count svelte-1n9lh6"> </p> <ul class="player-list svelte-1n9lh6"></ul></div>');function ka(e,t){Z(t,!0);let a=$("");function l(){const T=v(a).trim();T&&(n.addPlayer(T),n.save(),V(a,""))}function o(T){n.removePlayer(T),n.save()}function r(T){T.key==="Enter"&&l()}const u=z(()=>n.status==="setup");var c=ha(),s=m(c),i=m(s);ie(i);var d=h(i,2),g=m(d,!0);b(d),b(s);var y=h(s,2),p=m(y,!0);b(y);var B=h(y,2);re(B,21,()=>n.players,ne,(T,f)=>{var _=pa();let E;var w=m(_),S=m(w,!0);b(w);var M=h(w,2);{var R=C=>{var I=_a(),N=m(I,!0);b(I),q(H=>x(N,H),[()=>k("players.eliminated")]),A(C,I)};W(M,C=>{v(f).status==="eliminated"&&C(R)})}var L=h(M,2);{var D=C=>{var I=ga();Y("click",I,()=>o(v(f).id)),A(C,I)};W(L,C=>{v(u)&&C(D)})}b(_),q(()=>{E=me(_,1,"svelte-1n9lh6",null,E,{eliminated:v(f).status==="eliminated"}),x(S,v(f).name)}),A(T,_)}),b(B),b(c),q((T,f,_)=>{ce(i,"placeholder",T),x(g,f),x(p,_)},[()=>k("players.placeholder"),()=>k("players.add"),()=>k("players.count",{total:n.players.length,active:n.activePlayers.length})]),Y("keydown",i,r),oe(i,()=>v(a),T=>V(a,T)),Y("click",d,l),A(e,c),J()}ue(["keydown","click"]);function Le(e){const t=[...e];for(let a=t.length-1;a>0;a--){const l=Math.floor(Math.random()*(a+1));[t[a],t[l]]=[t[l],t[a]]}return t}function ya(e,t){const a=e.filter(u=>u.status==="active"),l=Le(a),o=Math.ceil(l.length/t),r=Array.from({length:o},(u,c)=>({id:`t${c+1}`,name:`Table ${c+1}`,seats:t}));for(const u of e)u.tableId=null,u.seat=null;l.forEach((u,c)=>{const s=c%o;u.tableId=r[s].id});for(const u of r){const c=l.filter(i=>i.tableId===u.id),s=Le(Array.from({length:t},(i,d)=>d+1));c.forEach((i,d)=>{i.seat=s[d]})}return{tables:r,players:e}}function xa(e,t){const a=e.filter(c=>c.status==="active"),l=t.filter(c=>a.some(s=>s.tableId===c.id)),o=[];for(const c of l){const s=a.filter(i=>i.tableId===c.id);if(s.length<=1&&l.length>1)for(const i of s){const g=l.filter(B=>B.id!==c.id).reduce((B,T)=>{const f=a.filter(E=>E.tableId===B.id).length,_=a.filter(E=>E.tableId===T.id).length;return f<=_?B:T}),y=a.filter(B=>B.tableId===g.id).map(B=>B.seat),p=Array.from({length:g.seats},(B,T)=>T+1).find(B=>!y.includes(B));o.push({playerId:i.id,from:c.name,to:g.name}),i.tableId=g.id,i.seat=p}}const r=t.filter(c=>a.some(s=>s.tableId===c.id));let u=!1;for(;!u;){const c=r.map(d=>({table:d,count:a.filter(g=>g.tableId===d.id).length})),s=c.reduce((d,g)=>d.count>=g.count?d:g),i=c.reduce((d,g)=>d.count<=g.count?d:g);if(s.count-i.count>1){const d=a.filter(B=>B.tableId===s.table.id),g=d[Math.floor(Math.random()*d.length)],y=a.filter(B=>B.tableId===i.table.id).map(B=>B.seat),p=Array.from({length:i.table.seats},(B,T)=>T+1).find(B=>!y.includes(B));o.push({playerId:g.id,from:s.table.name,to:i.table.name}),g.tableId=i.table.id,g.seat=p}else u=!0}return{moves:o,tables:r}}function Ba(e,t,a){const l=e.filter(s=>s.status==="active");if(l.length>a)return null;const o=t.filter(s=>l.some(i=>i.tableId===s.id));if(o.length<=1)return null;const r=o[0];r.name="Final Table";const u=[];for(const s of l)s.tableId!==r.id&&(u.push({playerId:s.id,from:t.find(i=>i.id===s.tableId)?.name,to:"Final Table"}),s.tableId=r.id);const c=Le(Array.from({length:r.seats},(s,i)=>i+1));return l.forEach((s,i)=>{s.seat=c[i]}),{finalTable:r,moves:u}}var Ta=P('<li class="svelte-1hud1it"> </li>'),wa=P('<div class="table-view svelte-1hud1it"><h3 class="svelte-1hud1it"> </h3> <p class="count svelte-1hud1it"> </p> <ul class="svelte-1hud1it"></ul></div>');function Ia(e,t){Z(t,!0);const a=z(()=>t.players.filter(i=>i.tableId===t.table.id&&i.status==="active").sort((i,d)=>i.seat-d.seat));var l=wa(),o=m(l),r=m(o,!0);b(o);var u=h(o,2),c=m(u);b(u);var s=h(u,2);re(s,21,()=>v(a),ne,(i,d)=>{var g=Ta(),y=m(g);b(g),q(p=>x(y,`${p??""} ${v(d).seat??""}: ${v(d).name??""}`),[()=>k("tables.seat")]),A(i,g)}),b(s),b(l),q(()=>{x(r,t.table.name),x(c,`${v(a).length??""} / ${t.table.seats??""} seats`)}),A(e,l),J()}var Ea=P('<p class="notification svelte-10fr8jr"> </p>'),Ra=P('<div class="tables-grid svelte-10fr8jr"></div>'),Sa=P('<p class="empty svelte-10fr8jr"> </p>'),Aa=P('<div class="table-setup"><div class="settings svelte-10fr8jr"><label class="svelte-10fr8jr"> <input type="number" min="2" max="10" class="svelte-10fr8jr"/></label> <label class="svelte-10fr8jr"> <input type="number" min="2" max="20" class="svelte-10fr8jr"/> <span class="hint svelte-10fr8jr"> </span></label></div> <button class="assign-btn svelte-10fr8jr"> </button> <!> <!></div>');function La(e,t){Z(t,!0);let a=$("");const l=z(()=>n.activePlayers.length>=2&&n.status!=="running");function o(){const R=ya(n.players,n.tableSize);n.tables=R.tables,n.save(),V(a,k("tables.assigned",{players:n.activePlayers.length,tables:R.tables.length}),!0),setTimeout(()=>V(a,""),3e3)}var r=Aa(),u=m(r),c=m(u),s=m(c),i=h(s);ie(i),b(c);var d=h(c,2),g=m(d),y=h(g);ie(y);var p=h(y,2),B=m(p,!0);b(p),b(d),b(u);var T=h(u,2),f=m(T,!0);b(T);var _=h(T,2);{var E=R=>{var L=Ea(),D=m(L,!0);b(L),q(()=>x(D,v(a))),A(R,L)};W(_,R=>{v(a)&&R(E)})}var w=h(_,2);{var S=R=>{var L=Ra();re(L,21,()=>n.tables,ne,(D,C)=>{Ia(D,{get table(){return v(C)},get players(){return n.players}})}),b(L),A(R,L)},M=R=>{var L=Sa(),D=m(L,!0);b(L),q(C=>x(D,C),[()=>k("tables.empty")]),A(R,L)};W(w,R=>{n.tables.length>0?R(S):R(M,!1)})}b(r),q((R,L,D,C)=>{x(s,`${R??""} `),x(g,`${L??""} `),x(B,D),T.disabled=!v(l),x(f,C)},[()=>k("tables.maxPerTable"),()=>k("tables.finalTableAt"),()=>k("tables.players"),()=>k("tables.assign")]),oe(i,()=>n.tableSize,R=>n.tableSize=R),oe(y,()=>n.finalTableThreshold,R=>n.finalTableThreshold=R),Y("click",T,o),A(e,r),J()}ue(["click"]);function Ma(e=null){let t=!1,a=e;function l(){return a||(a=new(window.AudioContext||window.webkitAudioContext)),a}function o(r,u,c="sine"){if(t)return;const s=l(),i=s.createOscillator(),d=s.createGain();i.type=c,i.frequency.setValueAtTime(r,s.currentTime),d.gain.setValueAtTime(.3,s.currentTime),i.connect(d),d.connect(s.destination),i.start(),i.stop(s.currentTime+u)}return{get isMuted(){return t},mute(){t=!0},unmute(){t=!1},toggleMute(){t=!t},playRoundEnd(){o(880,.5)},playBreakEnd(){o(660,.5)},playWarning(){o(440,.3)}}}var Pa=P('<span class="ante svelte-xbucwj"> </span>'),Na=P('<span class="blinds svelte-xbucwj"> </span> <!>',1),qa=P('<span class="break-text svelte-xbucwj"> </span>'),Ca=P('<div class="level-info svelte-xbucwj"><span class="label svelte-xbucwj"> </span> <!></div>');function Ve(e,t){Z(t,!0);var a=ot(),l=ve(a);{var o=r=>{var u=Ca(),c=m(u),s=m(c,!0);b(c);var i=h(c,2);{var d=y=>{var p=Na(),B=ve(p),T=m(B);b(B);var f=h(B,2);{var _=E=>{var w=Pa(),S=m(w);b(w),q(M=>x(S,`${M??""}: ${t.level.ante??""}`),[()=>k("structure.ante")]),A(E,w)};W(f,E=>{t.level.ante>0&&E(_)})}q(E=>x(T,`${E??""}: ${t.level.smallBlind??""}/${t.level.bigBlind??""}`),[()=>k("clock.blinds")]),A(y,p)},g=y=>{var p=qa(),B=m(p,!0);b(p),q(T=>x(B,T),[()=>k("structure.break")]),A(y,p)};W(i,y=>{t.level.type==="round"?y(d):y(g,!1)})}b(u),q(()=>x(s,t.label)),A(r,u)};W(l,r=>{t.level&&r(o)})}A(e,a),J()}var Da=P('<div class="controls svelte-1bc6657"><button class="svelte-1bc6657"> </button> <button class="play-pause svelte-1bc6657"> </button> <button class="svelte-1bc6657"> </button> <button class="mute svelte-1bc6657"> </button></div>');function Oa(e,t){Z(t,!0);var a=Da(),l=m(a),o=m(l);b(l);var r=h(l,2),u=m(r,!0);b(r);var c=h(r,2),s=m(c);b(c);var i=h(c,2),d=m(i,!0);b(i),b(a),q((g,y,p,B,T,f,_)=>{l.disabled=!t.canPrev,ce(l,"title",g),x(o,`« ${y??""}`),x(u,p),c.disabled=!t.canNext,ce(c,"title",B),x(s,`${T??""} »`),ce(i,"title",f),x(d,_)},[()=>k("clock.prevLevel"),()=>k("clock.prev"),()=>t.isRunning?k("clock.pause"):k("clock.play"),()=>k("clock.nextLevel"),()=>k("clock.next"),()=>t.isMuted?k("clock.unmute"):k("clock.mute"),()=>t.isMuted?k("clock.unmute"):k("clock.mute")]),Y("click",l,function(...g){t.onPrev?.apply(this,g)}),Y("click",r,function(...g){t.onToggle?.apply(this,g)}),Y("click",c,function(...g){t.onNext?.apply(this,g)}),Y("click",i,function(...g){t.onToggleMute?.apply(this,g)}),A(e,a),J()}ue(["click"]);var Fa=P('<p class="empty svelte-1hmdg4r"> </p>'),ja=P('<div class="break-banner svelte-1hmdg4r"> </div>'),za=P('<!> <!> <div class="timer svelte-1hmdg4r"> </div> <!> <!>',1),Ha=P("<div><!></div>");function Va(e,t){Z(t,!0);let a=$(null),l=null,o=!1;zt(()=>{V(a,Ma(),!0),document.addEventListener("visibilitychange",r),n.clock.isRunning&&(o=n.clock.timeRemaining<=60,l=setInterval(_,500))}),Ht(()=>{l&&clearInterval(l),document.removeEventListener("visibilitychange",r)});function r(){!document.hidden&&n.clock.isRunning&&_()}const u=z(()=>n.structure[n.clock.currentLevelIndex]),c=z(()=>n.structure[n.clock.currentLevelIndex+1]),s=z(()=>n.clock.currentLevelIndex>0),i=z(()=>n.clock.currentLevelIndex<n.structure.length-1),d=z(()=>v(u)?.type==="break"),g=z(()=>Math.floor(n.clock.timeRemaining/60)),y=z(()=>n.clock.timeRemaining%60),p=z(()=>`${String(v(g)).padStart(2,"0")}:${String(v(y)).padStart(2,"0")}`);function B(){n.clock.startTimestamp=Date.now(),n.clock.timeRemainingAtStart=n.clock.timeRemaining,o=n.clock.timeRemaining<=60,l=setInterval(_,500)}function T(){clearInterval(l),l=null}function f(){n.structure.length!==0&&(n.clock.isRunning?(n.clock.isRunning=!1,T()):(n.status==="setup"&&(n.status="running",n.clock.timeRemaining=v(u).duration*60),n.clock.isRunning=!0,B()),n.save())}function _(){const I=Math.floor((Date.now()-n.clock.startTimestamp)/1e3);let N=n.clock.timeRemainingAtStart-I;for(;N<=0;){const H=n.clock.currentLevelIndex;if(H>=n.structure.length-1){n.clock.timeRemaining=0,n.clock.isRunning=!1,T(),n.status="finished",n.save();return}const Q=n.structure[H]?.type==="break";n.clock.currentLevelIndex++;const X=n.structure[n.clock.currentLevelIndex].duration*60;N=X+N,n.clock.startTimestamp=Date.now()-(X-N)*1e3,n.clock.timeRemainingAtStart=X,o=N<=60,v(a)&&(Q?v(a).playBreakEnd():v(a).playRoundEnd()),n.save()}!o&&N<=60&&v(a)&&(v(a).playWarning(),o=!0),n.clock.timeRemaining=N}function E(){const I=n.clock.currentLevelIndex;if(I>=n.structure.length-1){n.clock.isRunning=!1,T(),n.status="finished",n.save();return}const N=n.structure[I]?.type==="break";n.clock.currentLevelIndex++;const H=n.structure[n.clock.currentLevelIndex];n.clock.timeRemaining=H.duration*60,n.clock.isRunning&&(n.clock.startTimestamp=Date.now(),n.clock.timeRemainingAtStart=n.clock.timeRemaining,o=!1),v(a)&&(N?v(a).playBreakEnd():v(a).playRoundEnd()),n.save()}function w(){if(!v(s))return;n.clock.currentLevelIndex--;const I=n.structure[n.clock.currentLevelIndex];n.clock.timeRemaining=I.duration*60,n.clock.isRunning&&(n.clock.startTimestamp=Date.now(),n.clock.timeRemainingAtStart=n.clock.timeRemaining,o=!1),n.save()}function S(){v(i)&&E()}var M=Ha();let R;var L=m(M);{var D=I=>{var N=Fa(),H=m(N,!0);b(N),q(Q=>x(H,Q),[()=>k("clock.setupFirst")]),A(I,N)},C=I=>{var N=za(),H=ve(N);{var Q=j=>{var U=ja(),pe=m(U,!0);b(U),q(_e=>x(pe,_e),[()=>k("clock.break")]),A(j,U)};W(H,j=>{v(d)&&j(Q)})}var G=h(H,2);{let j=z(()=>k("clock.current"));Ve(G,{get level(){return v(u)},get label(){return v(j)}})}var X=h(G,2),K=m(X,!0);b(X);var O=h(X,2);{let j=z(()=>k("clock.next"));Ve(O,{get level(){return v(c)},get label(){return v(j)}})}var F=h(O,2);{let j=z(()=>v(a)?.isMuted??!1);Oa(F,{get isRunning(){return n.clock.isRunning},onToggle:f,onPrev:w,onNext:S,get canPrev(){return v(s)},get canNext(){return v(i)},get isMuted(){return v(j)},onToggleMute:()=>v(a)?.toggleMute()})}q(()=>x(K,v(p))),A(I,N)};W(L,I=>{n.structure.length===0?I(D):I(C,!1)})}b(M),q(()=>R=me(M,1,"clock-tab svelte-1hmdg4r",null,R,{"is-break":v(d)})),A(e,M),J()}var Ua=P('<tr><td class="svelte-e9v8ke"> </td><td class="svelte-e9v8ke"> </td><td class="svelte-e9v8ke"> </td><td class="svelte-e9v8ke"><!></td></tr>'),Wa=P('<div class="log"><h3 class="svelte-e9v8ke"> </h3> <table class="svelte-e9v8ke"><thead><tr><th class="svelte-e9v8ke"> </th><th class="svelte-e9v8ke"> </th><th class="svelte-e9v8ke"> </th><th class="svelte-e9v8ke"> </th></tr></thead><tbody></tbody></table></div>');function Ka(e,t){Z(t,!0);const a=z(()=>n.standings);function l(w){return n.players.find(S=>S.id===w)?.name??"?"}var o=Wa(),r=m(o),u=m(r,!0);b(r);var c=h(r,2),s=m(c),i=m(s),d=m(i),g=m(d,!0);b(d);var y=h(d),p=m(y,!0);b(y);var B=h(y),T=m(B,!0);b(B);var f=h(B),_=m(f,!0);b(f),b(i),b(s);var E=h(s);re(E,21,()=>v(a),ne,(w,S)=>{var M=Ua();let R;var L=m(M),D=m(L,!0);b(L);var C=h(L),I=m(C,!0);b(C);var N=h(C),H=m(N,!0);b(N);var Q=h(N),G=m(Q);{var X=O=>{const F=z(()=>n.eliminations.find(U=>U.playerId===v(S).id));var j=qe();q(U=>x(j,U),[()=>v(F)?.eliminatedBy?l(v(F).eliminatedBy):"-"]),A(O,j)},K=O=>{var F=qe("-");A(O,F)};W(G,O=>{v(S).status==="eliminated"?O(X):O(K,!1)})}b(Q),b(M),q(O=>{R=me(M,1,"svelte-e9v8ke",null,R,{eliminated:v(S).status==="eliminated"}),x(D,v(S).position),x(I,v(S).name),x(H,O)},[()=>v(S).status==="active"?k("elim.playing"):k("elim.out")]),A(w,M)}),b(E),b(c),b(o),q((w,S,M,R,L)=>{x(u,w),x(g,S),x(p,M),x(T,R),x(_,L)},[()=>k("elim.standings"),()=>k("elim.position"),()=>k("elim.player"),()=>k("elim.status"),()=>k("elim.eliminatedBy")]),A(e,o),J()}var Ya=P("<option> </option>"),Ga=P("<option> </option>"),Xa=P('<div class="form svelte-2nklbm"><label class="svelte-2nklbm"> <select class="svelte-2nklbm"><option> </option><!></select></label> <label class="svelte-2nklbm"> <select class="svelte-2nklbm"><option> </option><!></select></label> <button class="svelte-2nklbm"> </button></div>'),Qa=P('<p class="winner svelte-2nklbm"> </p>'),Za=P('<p class="empty svelte-2nklbm"> </p>'),Ja=P('<p class="notification svelte-2nklbm"> </p>'),$a=P('<div class="elimination-panel"><!> <!> <!></div>');function el(e,t){Z(t,!0);let a=$(""),l=$(""),o=$("");const r=z(()=>n.activePlayers),u=z(()=>v(r).filter(f=>f.id!==v(a)));function c(){if(!v(a)||!v(l))return;n.eliminatePlayer(v(a),v(l));const f=Ba(n.players,n.tables,n.finalTableThreshold);if(f)V(o,k("elim.finalTable",{count:f.moves.length}),!0);else{const{moves:_}=xa(n.players,n.tables);_.length>0?V(o,_.map(E=>k("elim.moved",{name:n.players.find(w=>w.id===E.playerId)?.name,from:E.from,to:E.to})).join(". "),!0):V(o,"")}n.save(),V(a,""),V(l,""),n.activePlayers.length===1&&(V(o,k("elim.tournamentOver",{name:n.activePlayers[0].name}),!0),n.status="finished",n.save()),v(o)&&setTimeout(()=>V(o,""),5e3)}var s=$a(),i=m(s);{var d=f=>{var _=Xa(),E=m(_),w=m(E),S=h(w),M=m(S),R=m(M,!0);b(M),M.value=M.__value="";var L=h(M);re(L,17,()=>v(r),ne,(K,O)=>{var F=Ya(),j=m(F,!0);b(F);var U={};q(()=>{x(j,v(O).name),U!==(U=v(O).id)&&(F.value=(F.__value=v(O).id)??"")}),A(K,F)}),b(S),b(E);var D=h(E,2),C=m(D),I=h(C),N=m(I),H=m(N,!0);b(N),N.value=N.__value="";var Q=h(N);re(Q,17,()=>v(u),ne,(K,O)=>{var F=Ga(),j=m(F,!0);b(F);var U={};q(()=>{x(j,v(O).name),U!==(U=v(O).id)&&(F.value=(F.__value=v(O).id)??"")}),A(K,F)}),b(I),b(D);var G=h(D,2),X=m(G,!0);b(G),b(_),q((K,O,F,j,U)=>{x(w,`${K??""} `),x(R,O),x(C,`${F??""} `),x(H,j),G.disabled=!v(a)||!v(l),x(X,U)},[()=>k("elim.eliminated"),()=>k("elim.selectPlayer"),()=>k("elim.by"),()=>k("elim.selectEliminator"),()=>k("elim.eliminate")]),ze(S,()=>v(a),K=>V(a,K)),ze(I,()=>v(l),K=>V(l,K)),Y("click",G,c),A(f,_)},g=f=>{var _=Qa(),E=m(_,!0);b(_),q(w=>x(E,w),[()=>k("elim.winner",{name:v(r)[0].name})]),A(f,_)},y=f=>{var _=Za(),E=m(_,!0);b(_),q(w=>x(E,w),[()=>k("elim.noActive")]),A(f,_)};W(i,f=>{v(r).length>1?f(d):v(r).length===1?f(g,1):f(y,!1)})}var p=h(i,2);{var B=f=>{var _=Ja(),E=m(_,!0);b(_),q(()=>x(E,v(o))),A(f,_)};W(p,f=>{v(o)&&f(B)})}var T=h(p,2);Ka(T,{}),b(s),A(e,s),J()}ue(["click"]);var tl=P('<!> <div class="tab-content svelte-1uha8ag"><!></div>',1);function ul(e,t){Z(t,!0);const a=z(()=>[{id:"structure",label:k("tabs.structure")},{id:"players",label:k("tabs.players")},{id:"tables",label:k("tabs.tables")},{id:"clock",label:k("tabs.clock")},{id:"eliminations",label:k("tabs.eliminations")}]);let l=$("structure");var o=tl(),r=ve(o);la(r,{get tabs(){return v(a)},get activeTab(){return v(l)},set activeTab(p){V(l,p,!0)}});var u=h(r,2),c=m(u);{var s=p=>{ma(p,{})},i=p=>{ka(p,{})},d=p=>{La(p,{})},g=p=>{Va(p,{})},y=p=>{el(p,{})};W(c,p=>{v(l)==="structure"?p(s):v(l)==="players"?p(i,1):v(l)==="tables"?p(d,2):v(l)==="clock"?p(g,3):v(l)==="eliminations"&&p(y,4)})}b(u),A(e,o),J()}export{ul as component};
