import{d as ae,a as T,f as I,b as z,g as He,t as Te}from"../chunks/BRZgYzc2.js";import{v as de,B as Ue,x as W,J as ce,aq as Ve,C as We,a as u,F as Ke,G as Ye,I as Ie,K as fe,y as ue,ar as Ge,ay as Xe,aj as we,n as X,aN as Z,w as ge,aO as Ze,A as Je,e as Qe,aP as Le,ax as Be,aQ as $e,aR as et,aK as tt,a3 as Ee,aS as at,r as Ne,q as qe,aT as be,aU as lt,av as nt,o as rt,as as st,aV as Ce,a5 as Oe,aW as it,aX as De,aI as ot,aY as Fe,aZ as vt,a_ as ut,a$ as dt,b0 as ct,b1 as ft,b2 as bt,b3 as mt,b4 as _t,b5 as gt,aL as pt,u as ht,a2 as yt,V as K,Y,_ as g,Z as h,X as N,$ as p,W as ne,aM as O,m as V,s as q,ak as kt,a0 as Bt,b6 as xt}from"../chunks/DQCkQl5y.js";import{i as F}from"../chunks/EheYHruU.js";import{s as P}from"../chunks/DwcujrbB.js";import{p as Tt}from"../chunks/BL4-eBX3.js";import{t as c}from"../chunks/CLP-vEyg.js";import{i as It}from"../chunks/BXVAkpYj.js";function J(e,t){return t}function wt(e,t,a){for(var l=[],r=t.length,o,s=t.length,v=0;v<r;v++){let _=t[v];qe(_,()=>{if(o){if(o.pending.delete(_),o.done.add(_),o.pending.size===0){var m=e.outrogroups;pe(Be(o.done)),m.delete(o),m.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var n=l.length===0&&a!==null;if(n){var i=a,b=i.parentNode;nt(b),b.append(i),e.items.clear()}pe(t,!n)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function pe(e,t=!0){for(var a=0;a<e.length;a++)rt(e[a],t)}var Ae;function Q(e,t,a,l,r,o=null){var s=e,v=new Map,n=(t&Ce)!==0;if(n){var i=e;s=W?ce(Ve(i)):i.appendChild(de())}W&&We();var b=null,_=Qe(()=>{var f=a();return Le(f)?f:f==null?[]:Be(f)}),m,B=!0;function y(){d.fallback=b,Et(d,m,s,t,l),b!==null&&(m.length===0?(b.f&Z)===0?Ne(b):(b.f^=Z,ie(b,null,s)):qe(b,()=>{b=null}))}var w=Ue(()=>{m=u(_);var f=m.length;let k=!1;if(W){var x=Ke(s)===Ye;x!==(f===0)&&(s=Ie(),ce(s),fe(!1),k=!0)}for(var E=new Set,R=X,A=Je(),S=0;S<f;S+=1){W&&ue.nodeType===Ge&&ue.data===Xe&&(s=ue,k=!0,fe(!1));var M=m[S],C=l(M,S),L=B?null:v.get(C);L?(L.v&&we(L.v,M),L.i&&we(L.i,S),A&&R.unskip_effect(L.e)):(L=At(v,B?s:Ae??=de(),M,C,S,r,t,a),B||(L.e.f|=Z),v.set(C,L)),E.add(C)}if(f===0&&o&&!b&&(B?b=ge(()=>o(s)):(b=ge(()=>o(Ae??=de())),b.f|=Z)),f>E.size&&Ze(),W&&f>0&&ce(Ie()),!B)if(A){for(const[j,H]of v)E.has(j)||R.skip_effect(H.e);R.oncommit(y),R.ondiscard(()=>{})}else y();k&&fe(!0),u(_)}),d={effect:w,items:v,outrogroups:null,fallback:b};B=!1,W&&(s=ue)}function se(e){for(;e!==null&&(e.f&lt)===0;)e=e.next;return e}function Et(e,t,a,l,r){var o=(l&it)!==0,s=t.length,v=e.items,n=se(e.effect.first),i,b=null,_,m=[],B=[],y,w,d,f;if(o)for(f=0;f<s;f+=1)y=t[f],w=r(y,f),d=v.get(w).e,(d.f&Z)===0&&(d.nodes?.a?.measure(),(_??=new Set).add(d));for(f=0;f<s;f+=1){if(y=t[f],w=r(y,f),d=v.get(w).e,e.outrogroups!==null)for(const L of e.outrogroups)L.pending.delete(d),L.done.delete(d);if((d.f&Z)!==0)if(d.f^=Z,d===n)ie(d,null,a);else{var k=b?b.next:n;d===e.effect.last&&(e.effect.last=d.prev),d.prev&&(d.prev.next=d.next),d.next&&(d.next.prev=d.prev),$(e,b,d),$(e,d,k),ie(d,k,a),b=d,m=[],B=[],n=se(b.next);continue}if((d.f&be)!==0&&(Ne(d),o&&(d.nodes?.a?.unfix(),(_??=new Set).delete(d))),d!==n){if(i!==void 0&&i.has(d)){if(m.length<B.length){var x=B[0],E;b=x.prev;var R=m[0],A=m[m.length-1];for(E=0;E<m.length;E+=1)ie(m[E],x,a);for(E=0;E<B.length;E+=1)i.delete(B[E]);$(e,R.prev,A.next),$(e,b,R),$(e,A,x),n=x,b=A,f-=1,m=[],B=[]}else i.delete(d),ie(d,n,a),$(e,d.prev,d.next),$(e,d,b===null?e.effect.first:b.next),$(e,b,d),b=d;continue}for(m=[],B=[];n!==null&&n!==d;)(i??=new Set).add(n),B.push(n),n=se(n.next);if(n===null)continue}(d.f&Z)===0&&m.push(d),b=d,n=se(d.next)}if(e.outrogroups!==null){for(const L of e.outrogroups)L.pending.size===0&&(pe(Be(L.done)),e.outrogroups?.delete(L));e.outrogroups.size===0&&(e.outrogroups=null)}if(n!==null||i!==void 0){var S=[];if(i!==void 0)for(d of i)(d.f&be)===0&&S.push(d);for(;n!==null;)(n.f&be)===0&&n!==e.fallback&&S.push(n),n=se(n.next);var M=S.length;if(M>0){var C=(l&Ce)!==0&&s===0?a:null;if(o){for(f=0;f<M;f+=1)S[f].nodes?.a?.measure();for(f=0;f<M;f+=1)S[f].nodes?.a?.fix()}wt(e,S,C)}}o&&Oe(()=>{if(_!==void 0)for(d of _)d.nodes?.a?.apply()})}function At(e,t,a,l,r,o,s,v){var n=(s&$e)!==0?(s&et)===0?tt(a,!1,!1):Ee(a):null,i=(s&at)!==0?Ee(r):null;return{v:n,i,e:ge(()=>(o(t,n??a,i??r,v),()=>{e.delete(l)}))}}function ie(e,t,a){if(e.nodes)for(var l=e.nodes.start,r=e.nodes.end,o=t&&(t.f&Z)===0?t.nodes.start:a;l!==null;){var s=st(l);if(o.before(l),l===r)return;l=s}}function $(e,t,a){t===null?e.effect.first=a:t.next=a,a===null?e.effect.last=t:a.prev=t}const Se=[...` 	
\r\fÂ \v\uFEFF`];function St(e,t,a){var l=e==null?"":""+e;if(a){for(var r of Object.keys(a))if(a[r])l=l?l+" "+r:r;else if(l.length)for(var o=r.length,s=0;(s=l.indexOf(r,s))>=0;){var v=s+o;(s===0||Se.includes(l[s-1]))&&(v===l.length||Se.includes(l[v]))?l=(s===0?"":l.substring(0,s))+l.substring(v+1):s=v}}return l===""?null:l}function ve(e,t,a,l,r,o){var s=e.__className;if(W||s!==a||s===void 0){var v=St(a,l,o);(!W||v!==e.getAttribute("class"))&&(v==null?e.removeAttribute("class"):e.className=v),e.__className=a}else if(o&&r!==o)for(var n in o){var i=!!o[n];(r==null||i!==!!r[n])&&e.classList.toggle(n,i)}return o}function je(e,t,a=!1){if(e.multiple){if(t==null)return;if(!Le(t))return vt();for(var l of e.options)l.selected=t.includes(oe(l));return}for(l of e.options){var r=oe(l);if(ut(r,t)){l.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Mt(e){var t=new MutationObserver(()=>{je(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),dt(()=>{t.disconnect()})}function Me(e,t,a=t){var l=new WeakSet,r=!0;De(e,"change",o=>{var s=o?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(s),oe);else{var n=e.querySelector(s)??e.querySelector("option:not([disabled])");v=n&&oe(n)}a(v),X!==null&&l.add(X)}),ot(()=>{var o=t();if(e===document.activeElement){var s=Fe??X;if(l.has(s))return}if(je(e,o,r),r&&o===void 0){var v=e.querySelector(":checked");v!==null&&(o=oe(v),a(o))}e.__value=o,r=!1}),Mt(e)}function oe(e){return"__value"in e?e.__value:e.value}const Rt=Symbol("is custom element"),Pt=Symbol("is html"),Lt=mt?"link":"LINK";function ee(e){if(W){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var l=e.value;he(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var r=e.checked;he(e,"checked",null),e.checked=r}}};e.__on_r=a,Oe(a),ct()}}function he(e,t,a,l){var r=Nt(e);W&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName===Lt)||r[t]!==(r[t]=a)&&(t==="loading"&&(e[ft]=a),a==null?e.removeAttribute(t):typeof a!="string"&&qt(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function Nt(e){return e.__attributes??={[Rt]:e.nodeName.includes("-"),[Pt]:e.namespaceURI===bt}}var Re=new Map;function qt(e){var t=e.getAttribute("is")||e.nodeName,a=Re.get(t);if(a)return a;Re.set(t,a=[]);for(var l,r=e,o=Element.prototype;o!==r;){l=gt(r);for(var s in l)l[s].set&&a.push(s);r=_t(r)}return a}function te(e,t,a=t){var l=new WeakSet;De(e,"input",async r=>{var o=r?e.defaultValue:e.value;if(o=me(e)?_e(o):o,a(o),X!==null&&l.add(X),await pt(),o!==(o=t())){var s=e.selectionStart,v=e.selectionEnd,n=e.value.length;if(e.value=o??"",v!==null){var i=e.value.length;s===v&&v===n&&i>n?(e.selectionStart=i,e.selectionEnd=i):(e.selectionStart=s,e.selectionEnd=Math.min(v,i))}}}),(W&&e.defaultValue!==e.value||ht(t)==null&&e.value)&&(a(me(e)?_e(e.value):e.value),X!==null&&l.add(X)),yt(()=>{var r=t();if(e===document.activeElement){var o=Fe??X;if(l.has(o))return}me(e)&&r===_e(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function me(e){var t=e.type;return t==="number"||t==="range"}function _e(e){return e===""?null:+e}var Ct=I("<button> </button>"),Ot=I('<nav class="tab-bar svelte-1wwzsr0"></nav>');function Dt(e,t){K(t,!0);let a=Tt(t,"activeTab",15,"structure");var l=Ot();Q(l,21,()=>t.tabs,J,(r,o)=>{var s=Ct();let v;var n=h(s,!0);g(s),N(()=>{v=ve(s,1,"tab svelte-1wwzsr0",null,v,{active:a()===u(o).id}),P(n,u(o).label)}),z("click",s,()=>a(u(o).id)),T(r,s)}),g(l),T(e,l),Y()}ae(["click"]);const ye={quick:[{type:"round",smallBlind:25,bigBlind:50,ante:0,duration:10},{type:"round",smallBlind:50,bigBlind:100,ante:0,duration:10},{type:"break",duration:5},{type:"round",smallBlind:75,bigBlind:150,ante:0,duration:10},{type:"round",smallBlind:100,bigBlind:200,ante:25,duration:10},{type:"break",duration:5},{type:"round",smallBlind:150,bigBlind:300,ante:25,duration:10},{type:"round",smallBlind:200,bigBlind:400,ante:50,duration:10}],standard:[{type:"round",smallBlind:25,bigBlind:50,ante:0,duration:20},{type:"round",smallBlind:50,bigBlind:100,ante:0,duration:20},{type:"round",smallBlind:75,bigBlind:150,ante:0,duration:20},{type:"break",duration:10},{type:"round",smallBlind:100,bigBlind:200,ante:25,duration:20},{type:"round",smallBlind:150,bigBlind:300,ante:25,duration:20},{type:"round",smallBlind:200,bigBlind:400,ante:50,duration:20},{type:"break",duration:10},{type:"round",smallBlind:300,bigBlind:600,ante:75,duration:20},{type:"round",smallBlind:400,bigBlind:800,ante:100,duration:20},{type:"round",smallBlind:500,bigBlind:1e3,ante:100,duration:20}],deepStack:[{type:"round",smallBlind:25,bigBlind:50,ante:0,duration:30},{type:"round",smallBlind:50,bigBlind:100,ante:0,duration:30},{type:"round",smallBlind:75,bigBlind:150,ante:0,duration:30},{type:"break",duration:15},{type:"round",smallBlind:100,bigBlind:200,ante:0,duration:30},{type:"round",smallBlind:150,bigBlind:300,ante:25,duration:30},{type:"round",smallBlind:200,bigBlind:400,ante:25,duration:30},{type:"break",duration:15},{type:"round",smallBlind:300,bigBlind:600,ante:50,duration:30},{type:"round",smallBlind:400,bigBlind:800,ante:75,duration:30},{type:"round",smallBlind:500,bigBlind:1e3,ante:100,duration:30},{type:"break",duration:15},{type:"round",smallBlind:600,bigBlind:1200,ante:100,duration:30},{type:"round",smallBlind:800,bigBlind:1600,ante:200,duration:30}]};function Ft(e){return ye[e]?structuredClone(ye[e]):null}var jt=I('<button class="svelte-17xzady"> </button>'),zt=I('<div class="presets svelte-17xzady"><span class="label svelte-17xzady">Load preset:</span> <!></div>');function Ht(e,t){K(t,!1);const a=Object.keys(ye);function l(s){const v=Ft(s);v&&(c.loadStructure(v),c.save())}It();var r=zt(),o=p(h(r),2);Q(o,1,()=>a,J,(s,v)=>{var n=jt(),i=h(n,!0);g(n),N(()=>P(i,u(v))),z("click",n,()=>l(u(v))),T(s,n)}),g(r),T(e,r),Y()}ae(["click"]);var Ut=I('<span class="level-num svelte-ap3gho"> </span> <span class="blinds svelte-ap3gho"> </span> <span class="ante svelte-ap3gho"> </span> <span class="duration svelte-ap3gho"> </span>',1),Vt=I('<span class="break-label svelte-ap3gho">Break</span> <span class="duration svelte-ap3gho"> </span>',1),Wt=I('<div class="actions svelte-ap3gho"><button title="Move up" class="svelte-ap3gho">&uarr;</button> <button title="Move down" class="svelte-ap3gho">&darr;</button> <button class="remove svelte-ap3gho" title="Remove">&times;</button></div>'),Kt=I("<div><!> <!></div>");function Yt(e,t){K(t,!0);var a=Kt();let l;var r=h(a);{var o=i=>{var b=Ut(),_=ne(b),m=h(_);g(_);var B=p(_,2),y=h(B);g(B);var w=p(B,2),d=h(w);g(w);var f=p(w,2),k=h(f);g(f),N(()=>{P(m,`Level ${t.level.level??""}`),P(y,`${t.level.smallBlind??""}/${t.level.bigBlind??""}`),P(d,`Ante: ${t.level.ante??""}`),P(k,`${t.level.duration??""} min`)}),T(i,b)},s=i=>{var b=Vt(),_=p(ne(b),2),m=h(_);g(_),N(()=>P(m,`${t.level.duration??""} min`)),T(i,b)};F(r,i=>{t.level.type==="round"?i(o):i(s,!1)})}var v=p(r,2);{var n=i=>{var b=Wt(),_=h(b),m=p(_,2),B=p(m,2);g(b),N(()=>{_.disabled=t.isFirst,m.disabled=t.isLast}),z("click",_,()=>t.onMoveUp(t.index)),z("click",m,()=>t.onMoveDown(t.index)),z("click",B,()=>t.onRemove(t.index)),T(i,b)};F(v,i=>{t.disabled||i(n)})}g(a),N(()=>l=ve(a,1,"level-row svelte-ap3gho",null,l,{"is-break":t.level.type==="break"})),T(e,a),Y()}ae(["click"]);var Gt=I('<div class="add-controls svelte-q0tpu6"><fieldset class="svelte-q0tpu6"><legend class="svelte-q0tpu6">Add Round</legend> <label class="svelte-q0tpu6">Small <input type="number" min="1" class="svelte-q0tpu6"/></label> <label class="svelte-q0tpu6">Big <input type="number" min="1" class="svelte-q0tpu6"/></label> <label class="svelte-q0tpu6">Ante <input type="number" min="0" class="svelte-q0tpu6"/></label> <label class="svelte-q0tpu6">Min <input type="number" min="1" class="svelte-q0tpu6"/></label> <button class="svelte-q0tpu6">Add Round</button></fieldset> <fieldset class="svelte-q0tpu6"><legend class="svelte-q0tpu6">Add Break</legend> <label class="svelte-q0tpu6">Min <input type="number" min="1" class="svelte-q0tpu6"/></label> <button class="svelte-q0tpu6">Add Break</button></fieldset></div>'),Xt=I('<!> <div class="level-list svelte-q0tpu6"></div> <!>',1);function Zt(e,t){K(t,!0);let a=V(25),l=V(50),r=V(0),o=V(20),s=V(10);const v=O(()=>c.status!=="setup");function n(){c.addRound({smallBlind:u(a),bigBlind:u(l),ante:u(r),duration:u(o)}),c.save()}function i(){c.addBreak(u(s)),c.save()}function b(x){c.removeLevel(x),c.save()}function _(x){c.moveLevelUp(x),c.save()}function m(x){c.moveLevelDown(x),c.save()}var B=Xt(),y=ne(B);{var w=x=>{Ht(x,{})};F(y,x=>{u(v)||x(w)})}var d=p(y,2);Q(d,21,()=>c.structure,J,(x,E,R)=>{{let A=O(()=>R===c.structure.length-1);Yt(x,{get level(){return u(E)},index:R,onRemove:b,onMoveUp:_,onMoveDown:m,isFirst:R===0,get isLast(){return u(A)},get disabled(){return u(v)}})}}),g(d);var f=p(d,2);{var k=x=>{var E=Gt(),R=h(E),A=p(h(R),2),S=p(h(A));ee(S),g(A);var M=p(A,2),C=p(h(M));ee(C),g(M);var L=p(M,2),j=p(h(L));ee(j),g(L);var H=p(L,2),D=p(h(H));ee(D),g(H);var le=p(H,2);g(R);var U=p(R,2),re=p(h(U),2),xe=p(h(re));ee(xe),g(re);var ze=p(re,2);g(U),g(E),te(S,()=>u(a),G=>q(a,G)),te(C,()=>u(l),G=>q(l,G)),te(j,()=>u(r),G=>q(r,G)),te(D,()=>u(o),G=>q(o,G)),z("click",le,n),te(xe,()=>u(s),G=>q(s,G)),z("click",ze,i),T(x,E)};F(f,x=>{u(v)||x(k)})}T(e,B),Y()}ae(["click"]);var Jt=I('<span class="status svelte-1n9lh6">Eliminated</span>'),Qt=I('<button class="remove svelte-1n9lh6">&times;</button>'),$t=I('<li><span class="name svelte-1n9lh6"> </span> <!> <!></li>'),ea=I('<div class="players-tab"><div class="add-player svelte-1n9lh6"><input type="text" placeholder="Player name" class="svelte-1n9lh6"/> <button class="svelte-1n9lh6">Add Player</button></div> <p class="count svelte-1n9lh6"> </p> <ul class="player-list svelte-1n9lh6"></ul></div>');function ta(e,t){K(t,!0);let a=V("");function l(){const y=u(a).trim();y&&(c.addPlayer(y),c.save(),q(a,""))}function r(y){c.removePlayer(y),c.save()}function o(y){y.key==="Enter"&&l()}const s=O(()=>c.status==="setup");var v=ea(),n=h(v),i=h(n);ee(i);var b=p(i,2);g(n);var _=p(n,2),m=h(_);g(_);var B=p(_,2);Q(B,21,()=>c.players,J,(y,w)=>{var d=$t();let f;var k=h(d),x=h(k,!0);g(k);var E=p(k,2);{var R=M=>{var C=Jt();T(M,C)};F(E,M=>{u(w).status==="eliminated"&&M(R)})}var A=p(E,2);{var S=M=>{var C=Qt();z("click",C,()=>r(u(w).id)),T(M,C)};F(A,M=>{u(s)&&M(S)})}g(d),N(()=>{f=ve(d,1,"svelte-1n9lh6",null,f,{eliminated:u(w).status==="eliminated"}),P(x,u(w).name)}),T(y,d)}),g(B),g(v),N(()=>P(m,`${c.players.length??""} players registered
    (${c.activePlayers.length??""} active)`)),z("keydown",i,o),te(i,()=>u(a),y=>q(a,y)),z("click",b,l),T(e,v),Y()}ae(["keydown","click"]);function ke(e){const t=[...e];for(let a=t.length-1;a>0;a--){const l=Math.floor(Math.random()*(a+1));[t[a],t[l]]=[t[l],t[a]]}return t}function aa(e,t){const a=e.filter(s=>s.status==="active"),l=ke(a),r=Math.ceil(l.length/t),o=Array.from({length:r},(s,v)=>({id:`t${v+1}`,name:`Table ${v+1}`,seats:t}));for(const s of e)s.tableId=null,s.seat=null;l.forEach((s,v)=>{const n=v%r;s.tableId=o[n].id});for(const s of o){const v=l.filter(i=>i.tableId===s.id),n=ke(Array.from({length:t},(i,b)=>b+1));v.forEach((i,b)=>{i.seat=n[b]})}return{tables:o,players:e}}function la(e,t){const a=e.filter(v=>v.status==="active"),l=t.filter(v=>a.some(n=>n.tableId===v.id)),r=[];for(const v of l){const n=a.filter(i=>i.tableId===v.id);if(n.length<=1&&l.length>1)for(const i of n){const _=l.filter(y=>y.id!==v.id).reduce((y,w)=>{const d=a.filter(k=>k.tableId===y.id).length,f=a.filter(k=>k.tableId===w.id).length;return d<=f?y:w}),m=a.filter(y=>y.tableId===_.id).map(y=>y.seat),B=Array.from({length:_.seats},(y,w)=>w+1).find(y=>!m.includes(y));r.push({playerId:i.id,from:v.name,to:_.name}),i.tableId=_.id,i.seat=B}}const o=t.filter(v=>a.some(n=>n.tableId===v.id));let s=!1;for(;!s;){const v=o.map(b=>({table:b,count:a.filter(_=>_.tableId===b.id).length})),n=v.reduce((b,_)=>b.count>=_.count?b:_),i=v.reduce((b,_)=>b.count<=_.count?b:_);if(n.count-i.count>1){const b=a.filter(y=>y.tableId===n.table.id),_=b[Math.floor(Math.random()*b.length)],m=a.filter(y=>y.tableId===i.table.id).map(y=>y.seat),B=Array.from({length:i.table.seats},(y,w)=>w+1).find(y=>!m.includes(y));r.push({playerId:_.id,from:n.table.name,to:i.table.name}),_.tableId=i.table.id,_.seat=B}else s=!0}return{moves:r,tables:o}}function na(e,t,a){const l=e.filter(n=>n.status==="active");if(l.length>a)return null;const r=t.filter(n=>l.some(i=>i.tableId===n.id));if(r.length<=1)return null;const o=r[0];o.name="Final Table";const s=[];for(const n of l)n.tableId!==o.id&&(s.push({playerId:n.id,from:t.find(i=>i.id===n.tableId)?.name,to:"Final Table"}),n.tableId=o.id);const v=ke(Array.from({length:o.seats},(n,i)=>i+1));return l.forEach((n,i)=>{n.seat=v[i]}),{finalTable:o,moves:s}}var ra=I('<li class="svelte-1hud1it"> </li>'),sa=I('<div class="table-view svelte-1hud1it"><h3 class="svelte-1hud1it"> </h3> <p class="count svelte-1hud1it"> </p> <ul class="svelte-1hud1it"></ul></div>');function ia(e,t){K(t,!0);const a=O(()=>t.players.filter(i=>i.tableId===t.table.id&&i.status==="active").sort((i,b)=>i.seat-b.seat));var l=sa(),r=h(l),o=h(r,!0);g(r);var s=p(r,2),v=h(s);g(s);var n=p(s,2);Q(n,21,()=>u(a),J,(i,b)=>{var _=ra(),m=h(_);g(_),N(()=>P(m,`Seat ${u(b).seat??""}: ${u(b).name??""}`)),T(i,_)}),g(n),g(l),N(()=>{P(o,t.table.name),P(v,`${u(a).length??""} / ${t.table.seats??""} seats`)}),T(e,l),Y()}var oa=I('<p class="notification svelte-10fr8jr"> </p>'),va=I('<div class="tables-grid svelte-10fr8jr"></div>'),ua=I('<p class="empty svelte-10fr8jr">No tables assigned yet. Register players and click "Assign Tables".</p>'),da=I('<div class="table-setup"><div class="settings svelte-10fr8jr"><label class="svelte-10fr8jr">Max players per table: <input type="number" min="2" max="10" class="svelte-10fr8jr"/></label> <label class="svelte-10fr8jr">Final table at: <input type="number" min="2" max="20" class="svelte-10fr8jr"/> <span class="hint svelte-10fr8jr">players</span></label></div> <button class="assign-btn svelte-10fr8jr">Assign Tables</button> <!> <!></div>');function ca(e,t){K(t,!0);let a=V("");const l=O(()=>c.activePlayers.length>=2&&c.status!=="running");function r(){const f=aa(c.players,c.tableSize);c.tables=f.tables,c.save(),q(a,`Assigned ${c.activePlayers.length} players to ${f.tables.length} table(s).`),setTimeout(()=>q(a,""),3e3)}var o=da(),s=h(o),v=h(s),n=p(h(v));ee(n),g(v);var i=p(v,2),b=p(h(i));ee(b),kt(2),g(i),g(s);var _=p(s,2),m=p(_,2);{var B=f=>{var k=oa(),x=h(k,!0);g(k),N(()=>P(x,u(a))),T(f,k)};F(m,f=>{u(a)&&f(B)})}var y=p(m,2);{var w=f=>{var k=va();Q(k,21,()=>c.tables,J,(x,E)=>{ia(x,{get table(){return u(E)},get players(){return c.players}})}),g(k),T(f,k)},d=f=>{var k=ua();T(f,k)};F(y,f=>{c.tables.length>0?f(w):f(d,!1)})}g(o),N(()=>_.disabled=!u(l)),te(n,()=>c.tableSize,f=>c.tableSize=f),te(b,()=>c.finalTableThreshold,f=>c.finalTableThreshold=f),z("click",_,r),T(e,o),Y()}ae(["click"]);function fa(e=null){let t=!1,a=e;function l(){return a||(a=new(window.AudioContext||window.webkitAudioContext)),a}function r(o,s,v="sine"){if(t)return;const n=l(),i=n.createOscillator(),b=n.createGain();i.type=v,i.frequency.setValueAtTime(o,n.currentTime),b.gain.setValueAtTime(.3,n.currentTime),i.connect(b),b.connect(n.destination),i.start(),i.stop(n.currentTime+s)}return{get isMuted(){return t},mute(){t=!0},unmute(){t=!1},toggleMute(){t=!t},playRoundEnd(){r(880,.5)},playBreakEnd(){r(660,.5)},playWarning(){r(440,.3)}}}var ba=I('<span class="ante svelte-xbucwj"> </span>'),ma=I('<span class="blinds svelte-xbucwj"> </span> <!>',1),_a=I('<span class="break-text svelte-xbucwj">Break</span>'),ga=I('<div class="level-info svelte-xbucwj"><span class="label svelte-xbucwj"> </span> <!></div>');function Pe(e,t){K(t,!0);var a=He(),l=ne(a);{var r=o=>{var s=ga(),v=h(s),n=h(v,!0);g(v);var i=p(v,2);{var b=m=>{var B=ma(),y=ne(B),w=h(y);g(y);var d=p(y,2);{var f=k=>{var x=ba(),E=h(x);g(x),N(()=>P(E,`Ante: ${t.level.ante??""}`)),T(k,x)};F(d,k=>{t.level.ante>0&&k(f)})}N(()=>P(w,`Blinds: ${t.level.smallBlind??""}/${t.level.bigBlind??""}`)),T(m,B)},_=m=>{var B=_a();T(m,B)};F(i,m=>{t.level.type==="round"?m(b):m(_,!1)})}g(s),N(()=>P(n,t.label)),T(o,s)};F(l,o=>{t.level&&o(r)})}T(e,a),Y()}var pa=I('<div class="controls svelte-1bc6657"><button title="Previous level" class="svelte-1bc6657">&laquo; Prev</button> <button class="play-pause svelte-1bc6657"> </button> <button title="Next level" class="svelte-1bc6657">Next &raquo;</button> <button class="mute svelte-1bc6657"> </button></div>');function ha(e,t){var a=pa(),l=h(a),r=p(l,2),o=h(r,!0);g(r);var s=p(r,2),v=p(s,2),n=h(v,!0);g(v),g(a),N(()=>{l.disabled=!t.canPrev,P(o,t.isRunning?"Pause":"Play"),s.disabled=!t.canNext,he(v,"title",t.isMuted?"Unmute":"Mute"),P(n,t.isMuted?"Unmute":"Mute")}),z("click",l,function(...i){t.onPrev?.apply(this,i)}),z("click",r,function(...i){t.onToggle?.apply(this,i)}),z("click",s,function(...i){t.onNext?.apply(this,i)}),z("click",v,function(...i){t.onToggleMute?.apply(this,i)}),T(e,a)}ae(["click"]);var ya=I('<p class="empty svelte-1hmdg4r">Set up the tournament structure first.</p>'),ka=I('<div class="break-banner svelte-1hmdg4r">BREAK</div>'),Ba=I('<!> <!> <div class="timer svelte-1hmdg4r"> </div> <!> <!>',1),xa=I("<div><!></div>");function Ta(e,t){K(t,!0);let a=V(null),l=null;Bt(()=>{q(a,fa(),!0)}),xt(()=>{l&&clearInterval(l)});const r=O(()=>c.structure[c.clock.currentLevelIndex]),o=O(()=>c.structure[c.clock.currentLevelIndex+1]),s=O(()=>c.clock.currentLevelIndex>0),v=O(()=>c.clock.currentLevelIndex<c.structure.length-1),n=O(()=>u(r)?.type==="break"),i=O(()=>Math.floor(c.clock.timeRemaining/60)),b=O(()=>c.clock.timeRemaining%60),_=O(()=>`${String(u(i)).padStart(2,"0")}:${String(u(b)).padStart(2,"0")}`);function m(){c.structure.length!==0&&(c.clock.isRunning?(c.clock.isRunning=!1,clearInterval(l),l=null):(c.status==="setup"&&(c.status="running",c.clock.timeRemaining=u(r).duration*60),c.clock.isRunning=!0,l=setInterval(B,1e3)),c.save())}function B(){if(c.clock.timeRemaining<=0){y();return}c.clock.timeRemaining--,c.clock.timeRemaining===60&&u(a)&&u(a).playWarning()}function y(){if(c.clock.currentLevelIndex>=c.structure.length-1){c.clock.isRunning=!1,clearInterval(l),l=null,c.status="finished",c.save();return}const A=u(r)?.type==="break";c.clock.currentLevelIndex++;const S=c.structure[c.clock.currentLevelIndex];c.clock.timeRemaining=S.duration*60,u(a)&&(A?u(a).playBreakEnd():u(a).playRoundEnd()),c.save()}function w(){u(s)&&(c.clock.currentLevelIndex--,c.clock.timeRemaining=u(r).duration*60,c.save())}function d(){u(v)&&y()}var f=xa();let k;var x=h(f);{var E=A=>{var S=ya();T(A,S)},R=A=>{var S=Ba(),M=ne(S);{var C=U=>{var re=ka();T(U,re)};F(M,U=>{u(n)&&U(C)})}var L=p(M,2);Pe(L,{get level(){return u(r)},label:"Current"});var j=p(L,2),H=h(j,!0);g(j);var D=p(j,2);Pe(D,{get level(){return u(o)},label:"Next"});var le=p(D,2);{let U=O(()=>u(a)?.isMuted??!1);ha(le,{get isRunning(){return c.clock.isRunning},onToggle:m,onPrev:w,onNext:d,get canPrev(){return u(s)},get canNext(){return u(v)},get isMuted(){return u(U)},onToggleMute:()=>u(a)?.toggleMute()})}N(()=>P(H,u(_))),T(A,S)};F(x,A=>{c.structure.length===0?A(E):A(R,!1)})}g(f),N(()=>k=ve(f,1,"clock-tab svelte-1hmdg4r",null,k,{"is-break":u(n)})),T(e,f),Y()}var Ia=I('<tr><td class="svelte-e9v8ke"> </td><td class="svelte-e9v8ke"> </td><td class="svelte-e9v8ke"> </td><td class="svelte-e9v8ke"><!></td></tr>'),wa=I('<div class="log"><h3 class="svelte-e9v8ke">Standings</h3> <table class="svelte-e9v8ke"><thead><tr><th class="svelte-e9v8ke">#</th><th class="svelte-e9v8ke">Player</th><th class="svelte-e9v8ke">Status</th><th class="svelte-e9v8ke">Eliminated By</th></tr></thead><tbody></tbody></table></div>');function Ea(e,t){K(t,!0);const a=O(()=>c.standings);function l(v){return c.players.find(n=>n.id===v)?.name??"?"}var r=wa(),o=p(h(r),2),s=p(h(o));Q(s,21,()=>u(a),J,(v,n)=>{var i=Ia();let b;var _=h(i),m=h(_,!0);g(_);var B=p(_),y=h(B,!0);g(B);var w=p(B),d=h(w,!0);g(w);var f=p(w),k=h(f);{var x=R=>{const A=O(()=>c.eliminations.find(M=>M.playerId===u(n).id));var S=Te();N(M=>P(S,M),[()=>u(A)?.eliminatedBy?l(u(A).eliminatedBy):"-"]),T(R,S)},E=R=>{var A=Te("-");T(R,A)};F(k,R=>{u(n).status==="eliminated"?R(x):R(E,!1)})}g(f),g(i),N(()=>{b=ve(i,1,"svelte-e9v8ke",null,b,{eliminated:u(n).status==="eliminated"}),P(m,u(n).position),P(y,u(n).name),P(d,u(n).status==="active"?"Playing":"Out")}),T(v,i)}),g(s),g(o),g(r),T(e,r),Y()}var Aa=I("<option> </option>"),Sa=I("<option> </option>"),Ma=I('<div class="form svelte-2nklbm"><label class="svelte-2nklbm">Eliminated: <select class="svelte-2nklbm"><option>Select player...</option><!></select></label> <label class="svelte-2nklbm">By: <select class="svelte-2nklbm"><option>Select eliminator...</option><!></select></label> <button class="svelte-2nklbm">Eliminate</button></div>'),Ra=I('<p class="winner svelte-2nklbm"> </p>'),Pa=I('<p class="empty svelte-2nklbm">No active players.</p>'),La=I('<p class="notification svelte-2nklbm"> </p>'),Na=I('<div class="elimination-panel"><!> <!> <!></div>');function qa(e,t){K(t,!0);let a=V(""),l=V(""),r=V("");const o=O(()=>c.activePlayers),s=O(()=>u(o).filter(d=>d.id!==u(a)));function v(){if(!u(a)||!u(l))return;c.eliminatePlayer(u(a),u(l));const d=na(c.players,c.tables,c.finalTableThreshold);if(d)q(r,`Final Table! ${d.moves.length} player(s) moved.`);else{const{moves:f}=la(c.players,c.tables);f.length>0?q(r,f.map(k=>`${c.players.find(x=>x.id===k.playerId)?.name} moved from ${k.from} to ${k.to}`).join(". "),!0):q(r,"")}c.save(),q(a,""),q(l,""),c.activePlayers.length===1&&(q(r,`Tournament over! Winner: ${c.activePlayers[0].name}`),c.status="finished",c.save()),u(r)&&setTimeout(()=>q(r,""),5e3)}var n=Na(),i=h(n);{var b=d=>{var f=Ma(),k=h(f),x=p(h(k)),E=h(x);E.value=E.__value="";var R=p(E);Q(R,17,()=>u(o),J,(j,H)=>{var D=Aa(),le=h(D,!0);g(D);var U={};N(()=>{P(le,u(H).name),U!==(U=u(H).id)&&(D.value=(D.__value=u(H).id)??"")}),T(j,D)}),g(x),g(k);var A=p(k,2),S=p(h(A)),M=h(S);M.value=M.__value="";var C=p(M);Q(C,17,()=>u(s),J,(j,H)=>{var D=Sa(),le=h(D,!0);g(D);var U={};N(()=>{P(le,u(H).name),U!==(U=u(H).id)&&(D.value=(D.__value=u(H).id)??"")}),T(j,D)}),g(S),g(A);var L=p(A,2);g(f),N(()=>L.disabled=!u(a)||!u(l)),Me(x,()=>u(a),j=>q(a,j)),Me(S,()=>u(l),j=>q(l,j)),z("click",L,v),T(d,f)},_=d=>{var f=Ra(),k=h(f);g(f),N(()=>P(k,`Winner: ${u(o)[0].name??""}`)),T(d,f)},m=d=>{var f=Pa();T(d,f)};F(i,d=>{u(o).length>1?d(b):u(o).length===1?d(_,1):d(m,!1)})}var B=p(i,2);{var y=d=>{var f=La(),k=h(f,!0);g(f),N(()=>P(k,u(r))),T(d,f)};F(B,d=>{u(r)&&d(y)})}var w=p(B,2);Ea(w,{}),g(n),T(e,n),Y()}ae(["click"]);var Ca=I('<!> <div class="tab-content svelte-1uha8ag"><!></div>',1);function Va(e){const t=[{id:"structure",label:"Structure"},{id:"players",label:"Players"},{id:"tables",label:"Tables"},{id:"clock",label:"Clock"},{id:"eliminations",label:"Eliminations"}];let a=V("structure");var l=Ca(),r=ne(l);Dt(r,{get tabs(){return t},get activeTab(){return u(a)},set activeTab(m){q(a,m,!0)}});var o=p(r,2),s=h(o);{var v=m=>{Zt(m,{})},n=m=>{ta(m,{})},i=m=>{ca(m,{})},b=m=>{Ta(m,{})},_=m=>{qa(m,{})};F(s,m=>{u(a)==="structure"?m(v):u(a)==="players"?m(n,1):u(a)==="tables"?m(i,2):u(a)==="clock"?m(b,3):u(a)==="eliminations"&&m(_,4)})}g(o),T(e,l)}export{Va as component};
